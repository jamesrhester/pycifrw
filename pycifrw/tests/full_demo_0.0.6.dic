#\#CIF_2.0
#DDLm dictionary edited in DDLm-authortools
data_demo_dic

_dictionary.title                       demo_dic
_dictionary.version                     0.1.1
_dictionary.ddl_conformance             3.11.04
_dictionary.class                       Instance
_dictionary.namespace                   ?
_description.text 
                                        'This dictionary was developed as a demonstration dictionary showing how datanames in an olog presentation can be related to one another.'
_dictionary.date                        2016-01-05
loop_
  _dictionary_audit.version
  _dictionary_audit.date
  _dictionary_audit.revision
         0.0.1     2015-11-02          'First version(James Hester)()()()()()'           
         0.0.2     2015-11-04          'Added a CIF2-style array for images and a method for constructing a full scan (James Hester)()'   
         0.0.3     2015-11-11          'Added keys for all loop categories and included various types of axes()()()'  
         0.0.4     2015-11-11          'Added custom imgCIF dictionary as import(James Hester)'   
         0.0.5     2015-11-20          'Debugged methods, add and tested methods to find simple scans and detector, goniometer axes. Adding linked item IDs. Simple_detector_axis changed to simple_array_axis()'         
         0.0.6     2015-11-23          'Added alternate coordinate system.(James Hester)()()'     
         0.0.7     2015-11-25          'Merged with img_cif CIF2 version(James Hester)' 
         0.0.8     2015-12-14          'Changed to use pullbacks()()()'        
         0.0.9     2015-12-21          'Added pullbacks for simple scans and input routines as well()()()()()()()()()()'        
         0.1.0     2016-01-05          'Started adding multiple methods(James Hester)()()'        
         0.1.1     2016-01-05          'Added detector axis and goniometer axis derived categories(James Hester)'

save_DEMO_DIC_HEAD

_definition.id                          DEMO_DIC_HEAD
_definition.scope                       Category
_definition.class                       Head
_description.text 
                                        'This category is parent of all other categories in the demo_dic dictionary'
_name.object_id                         DEMO_DIC_HEAD

save_


save_ARRAY_DATA

_definition.id                          array_data
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the ARRAY_DATA category are the containers for
     the array data items described in the category ARRAY_STRUCTURE.

     It is recognized that the data in this category needs to be used in
     two distinct ways.  During a data collection the lack of ancillary
     data and timing constraints in processing data may dictate the
     need to make a 'miniCBF' nothing more than an essential minimum
     of information to record the results of the data collection.  In that
     case it is proper to use the ARRAY_DATA category as a
     container for just a single image and a compacted, beam-line
     dependent list of data collection parameter values.  In such
     a case, only the tags '_array_data.header_convention',
     '_array_data.header_contents' and '_array_data.data' need be
     populated.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         ARRAY_DATA
_category.key_id                        '_array_data.binary_id'
_category.key_list ['_array_data.binary_id']
_name.linked_item_id                    ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with ad as array_data
loop dssf as diffrn_scan_simple_frames {
    array_data   (.array_id = dssf.array_id,
          .binary_id = dssf.binary_id,
          .as_integers = dssf.array_data
         )
}

; 

save_


save__array_data.array_id

_definition.id                          '_array_data.array_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure.id in the
    ARRAY_STRUCTURE category. 
;
_name.category_id                       array_data
_name.object_id                         array_id
_name.linked_item_id                    '_array_structure.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_enumeration.default                    1

save_


save__array_data.as_integers

_definition.id                          '_array_data.as_integers'
_name.object_id                         as_integers
_name.category_id                       array_data
_definition.class                       Datum
_description.text                       'The data presented as an integer array'
_type.purpose                           Measurand
_type.source                            Recorded
_type.container                         Array
_type.contents                          Integer
_name.linked_item_id                    ''

save_


save__array_data.binary_id

_definition.id                          '_array_data.binary_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is an identifier which should uniquely identify the
    particular block of array data.
    The value of _array_data.binary_id distinguishes
    among multiple sets of data with the same array structure.
    If the MIME header of the data array specifies a
    value for X-Binary-ID, the value of  _array_data.binary_id
    should be equal to the value given for X-Binary-ID.
;
_name.category_id                       array_data
_name.object_id                         Binary_id
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Code
_enumeration.default                    1

save_


save__array_data.data

_definition.id                          '_array_data.data'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _array_data.data contains the array data
    encapsulated in a STAR string.

    The representation used is a variant on the
    Multipurpose Internet Mail Extensions (MIME) specified
    in RFC 2045-2049 by N. Freed et al.  The boundary
    delimiter used in writing an imgCIF or CBF is
    '\n--CIF-BINARY-FORMAT-SECTION--' (including the
    required initial '\n--').

    The Content-Type may be any of the discrete types permitted
    in RFC 2045; 'application/octet-stream' is recommended
    for diffraction images in the ARRAY_DATA category.
    Note:  When appropriate in other categories, e.g. for
    photographs of crystals, more precise types, such as
    'image/jpeg', 'image/tiff', 'image/png', etc. should be used.

    If an octet stream was compressed, the compression should
    be specified by the parameter
      'conversions="X-CBF_PACKED"'
    or the parameter
      'conversions="X-CBF_CANONICAL"'
    or the parameter
      'conversions="X-CBF_BYTE_OFFSET"'
    or the parameter
      'conversions="X-CBF_BACKGROUND_OFFSET_DELTA"'

    If the parameter
      'conversions="X-CBF_PACKED"'
    is given it may be further modified with the parameters
      '"uncorrelated_sections"'
    or
      '"flat"'

    If the '"uncorrelated_sections"' parameter is
    given, each section will be compressed without using
    the prior section for averaging.

    If the '"flat"' parameter is given, each the
    image will be treated as one long row.

    Note that the X-CBF_CANONICAL and X-CBF_PACKED are
    slower but more efficient compressions that the others.
    The X-CBF_BYTE_OFFSET compression is a good compromise
    between speed and efficiency for ordinary diffraction
    images.  The X-CBF_BACKGROUND_OFFSET_DELTA compression
    is oriented towards sparse data, such as masks and
    tables of replacement pixel values for images with
    overloaded spots.

    The Content-Transfer-Encoding may be 'BASE64',
    'Quoted-Printable', 'X-BASE8', 'X-BASE10',
    'X-BASE16' or 'X-BASE32K', for an imgCIF or 'BINARY'
    for a CBF.  The octal, decimal and hexadecimal transfer
    encodings are provided for convenience in debugging and
    are not recommended for archiving and data interchange.

    In a CIF, one of the parameters 'charset=us-ascii',
    'charset=utf-8' or 'charset=utf-16' may be used on the
    Content-Transfer-Encoding to specify the character set
    used for the external presentation of the encoded data.
    If no charset parameter is given, the character set of
    the enclosing CIF is assumed.  In any case, if a BOM
    flag is detected (FE FF for big-endian UTF-16, FF FE for
    little-endian UTF-16 or EF BB BF for UTF-8) is detected,
    the indicated charset will be assumed until the end of the
    encoded data or the detection of a different BOM.  The
    charset of the Content-Transfer-Encoding is not the character
    set of the encoded data, only the character set of the
    presentation of the encoded data and should be respecified
    for each distinct STAR string.

    In an imgCIF file, the encoded binary data begins after
    the empty line terminating the header.  In an imgCIF file,
    the encoded binary data ends with the terminating boundary
    delimiter '\n--CIF-BINARY-FORMAT-SECTION----'
    in the currently effective charset or with the '\n; '
    that terminates the STAR string.

    In a CBF, the raw binary data begins after an empty line
    terminating the header and after the sequence:

    Octet   Hex   Decimal  Purpose
      0     0C       12    (ctrl-L) Page break
      1     1A       26    (ctrl-Z) Stop listings in MS-DOS
      2     04       04    (Ctrl-D) Stop listings in UNIX
      3     D5      213    Binary section begins

    None of these octets are included in the calculation of
    the message size or in the calculation of the
    message digest.

    The X-Binary-Size header specifies the size of the
    equivalent binary data in octets.  If compression was
    used, this size is the size after compression, including
    any book-keeping fields.  An adjustment is made for
    the deprecated binary formats in which eight bytes of binary
    header are used for the compression type.  In this case,
    the eight bytes used for the compression type are subtracted
    from the size, so that the same size will be reported
    if the compression type is supplied in the MIME header.
    Use of the MIME header is the recommended way to
    supply the compression type.  In general, no portion of
    the  binary header is included in the calculation of the size.

    The X-Binary-Element-Type header specifies the type of
    Binary data in the octets, using the same descriptive
    phrases as in _array_structure.encoding_type.  The default
    value is 'unsigned 32-bit integer'.

    An MD5 message digest may, optionally, be used. The 'RSA Data
    Security, Inc. MD5 Message-Digest Algorithm' should be used.
    No portion of the header is included in the calculation of the
    message digest.

    If the Transfer Encoding is 'X-BASE8', 'X-BASE10' or
    'X-BASE16', the data are presented as octal, decimal or
    hexadecimal data organized into lines or words.  Each word
    is created by composing octets of data in fixed groups of
    2, 3, 4, 6 or 8 octets, either in the order ...4321 ('big-
    endian') or 1234... ('little-endian').  If there are fewer
    than the specified number of octets to fill the last word,
    then the missing octets are presented as '==' for each
    missing octet.  Exactly two equal signs are used for each
    missing octet even for octal and decimal encoding.
    The format of lines is:

    rnd xxxxxx xxxxxx xxxxxx

    where r is 'H', 'O' or 'D' for hexadecimal, octal or
    decimal, n is the number of octets per word and d is '<'
    or '>' for the '...4321' and '1234...' octet orderings,
    respectively.  The '==' padding for the last word should
    be on the appropriate side to correspond to the missing
    octets, e.g.

    H4< FFFFFFFF FFFFFFFF 07FFFFFF ====0000

    or

    H3> FF0700 00====

    For these hexadecimal, octal and decimal formats only,
    comments beginning with '#' are permitted to improve
    readability.

    BASE64 encoding follows MIME conventions.  Octets are
    in groups of three: c1, c2, c3.  The resulting 24 bits
    are broken into four six-bit quantities, starting with
    the high-order six bits (c1 >> 2) of the first octet, then
    the low-order two bits of the first octet followed by the
    high-order four bits of the second octet [(c1 & 3)<<4 | (c2>>4)],
    then the bottom four bits of the second octet followed by the
    high-order two bits of the last octet [(c2 & 15)<<2 | (c3>>6)],
    then the bottom six bits of the last octet (c3 & 63).  Each
    of these four quantities is translated into an ASCII character
    using the mapping:

              1         2         3         4         5         6
    0123456789012345678901234567890123456789012345678901234567890123
    |         |         |         |         |         |         |
    ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/

    With short groups of octets padded on the right with one '='
    if c3 is missing, and with '==' if both c2 and c3 are missing.

    X-BASE32K encoding is similar to BASE64 encoding, except that
    sets of 15 octets are encoded as sets of 8 16-bit unicode
    characters, by breaking the 120 bits into 8 15-bit quantities.
    256 is added to each 15 bit quantity to bring it into a
    printable uncode range.  When encoding, zero padding is used
    to fill out the last 15 bit quantity.  If 8 or more bits of
    padding are used, a single equals sign (hexadecimal 003D) is
    appended.  Embedded whitespace and newlines are introduced
    to produce lines of no more than 80 characters each.  On
    decoding, all printable ascii characters and ascii whitespace
    characters are ignored except for any trailing equals signs.
    The number of trailing equals signs indicated the number of
    trailing octets to be trimmed from the end of the decoded data.
    (see Georgi Darakev, Vassil Litchev, Kostadin Z. Mitev, Herbert
    J. Bernstein, 'Efficient Support of Binary Data in the XML
    Implementation of the NeXus File Format',absract W0165,
    ACA Summer Meeting, Honolulu, HI, July 2006).

    QUOTED-PRINTABLE encoding also follows MIME conventions, copying
    octets without translation if their ASCII values are 32...38,
    42, 48...57, 59, 60, 62, 64...126 and the octet is not a ';'
    in column 1.  All other characters are translated to =nn, where
    nn is the hexadecimal encoding of the octet.  All lines are
    'wrapped' with a terminating '=' (i.e. the MIME conventions
    for an implicit line terminator are never used).

    The "X-Binary-Element-Byte-Order" can specify either
    '"BIG_ENDIAN"' or '"LITTLE_ENDIAN"' byte order of the imaage
    data.  Only LITTLE_ENDIAN is recommended.  Processors
    may treat BIG_ENDIAN as a warning of data that can
    only be processed by special software.

    The "X-Binary-Number-of-Elements" specifies the number of
    elements (not the number of octets) in the decompressed, decoded
    image.

    The optional "X-Binary-Size-Fastest-Dimension" specifies the
    number of elements (not the number of octets) in one row of the
    fastest changing dimension of the binary data array. This
    information must be in the MIME header for proper operation of
    some of the decompression algorithms.

    The optional "X-Binary-Size-Second-Dimension" specifies the
    number of elements (not the number of octets) in one column of
    the second-fastest changing dimension of the binary data array.
    This information must be in the MIME header for proper operation
    of some of the decompression algorithms.

    The optional "X-Binary-Size-Third-Dimension" specifies the
    number of sections for the third-fastest changing dimension of
    the binary data array.

    The optional "X-Binary-Size-Padding" specifies the size in
    octets of an optional padding after the binary array data and
    before the closing flags for a binary section.
;
_name.category_id                       array_data
_name.object_id                         'data'
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Binary

save_


save__array_data.header_contents

_definition.id                          '_array_data.header_contents'
_definition.update                      2014-07-07
_description.text                       
;
    This item is an text field for use in minimal CBF files to carry
    essential header information to be kept with image data
    in _array_data.data when the tags that normally carry the
    structured metadata for the image have not been populated.
    Normally this data item should not appear when the full set
    of tags have been populated and _diffrn_data_frame.details
    appears.
;
_name.category_id                       array_data
_name.object_id                         header_contents
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text

save_


save__array_data.header_convention

_definition.id                          '_array_data.header_convention'
_definition.update                      2014-07-07
_description.text                       
;
    This item is an identifier for the convention followed in
    constructing the contents of _array_data.header_contents
    The permitted values are of the of an image creator identifier
    followed by an underscore and a version string.  To avoid
    confusion about conventions, all creator identifiers
    should be registered with the IUCr and the conventions
    for all identifiers and versions should be posted on
    the MEDSBIO.org web site.
;
_name.category_id                       array_data
_name.object_id                         header_convention
_type.purpose                           Encode
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code

save_


save_ARRAY_ELEMENT_SIZE

_definition.id                          array_element_size
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the ARRAY_ELEMENT_SIZE category record the physical
     size of array elements along each array dimension.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         ARRAY_ELEMENT_SIZE
_category.key_id                        '_array_element_size.id'
_category.key_list ['_array_element_size.array_id'  '_array_element_size.index']

save_


save__array_element_size.array_id

_definition.id                          '_array_element_size.array_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure.id in the
    ARRAY_STRUCTURE category.
;
_name.category_id                       array_element_size
_name.object_id                         array_id
_name.linked_item_id                    '_array_structure.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_element_size.index

_definition.id                          '_array_element_size.index'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure_list.index in
    the ARRAY_STRUCTURE_LIST category.
;
_name.category_id                       array_element_size
_name.object_id                         index
_name.linked_item_id                    '_array_structure_list.index'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_element_size.size

_definition.id                          '_array_element_size.size'
_definition.update                      2014-07-07
_description.text                       
;
     The size in metres of an image element in this
     dimension. This supposes that the elements are arranged
     on a regular grid.
;
_name.category_id                       array_element_size
_name.object_id                         size
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             metres

save_


save__array_element_size.variant

_definition.id                          '_array_element_size.variant'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _array_element_size.variant gives the variant
    to which the given ARRAY_ELEMENT_SIZE row is related.
    If this value is not given, the variant is assumed to the default
    null variant.  This item is a pointer to _variant.variant in the
    VARIANT category.
;
_name.category_id                       array_element_size
_name.object_id                         variant
_name.linked_item_id                    '_variant.variant'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_ARRAY_INTENSITIES

_definition.id                          ARRAY_INTENSITIES
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
    Data items in the ARRAY_INTENSITIES category record the
    information required to recover the intensity data from
    the set of data values stored in the ARRAY_DATA category.

    The detector may have a complex relationship
    between the raw intensity values and the number of
    incident photons.  In most cases, the number stored
    in the final array will have a simple linear relationship
    to the actual number of incident photons, given by
    _array_intensities.gain.  If raw, uncorrected values
    are presented (e.g. for calibration experiments), the
    value of _array_intensities.linearity will be 'raw'
    and _array_intensities.gain will not be used.

;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         ARRAY_INTENSITIES
_category.key_id                        '_array_intensities.binary_id'
_category.key_list ['_array_intensities.binary_id']

save_


save__array_intensities.array_id

_definition.id                          '_array_intensities.array_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure.id in the
    ARRAY_STRUCTURE category.
;
_name.category_id                       array_intensities
_name.object_id                         array_id
_name.linked_item_id                    '_array_structure.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_intensities.binary_id

_definition.id                          '_array_intensities.binary_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_data.binary_id in the
    ARRAY_DATA category.
;
_name.category_id                       array_intensities
_name.object_id                         binary_id
_name.linked_item_id                    '_array_data.binary_id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_intensities.details

_definition.id                          '_array_intensities.details'
_definition.update                      2014-07-07
_description.text                       
;
     A description of special aspects of the calculation of 
     array intensities.
;
_name.category_id                       array_intensities
_name.object_id                         details
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text
loop_
  _description_example.case
         'Gain_setting: low gain (vrf = -0.300)' 

save_


save__array_intensities.gain

_definition.id                          '_array_intensities.gain'
_definition.update                      2014-07-07
_description.text                       
;
     Detector 'gain'. The factor by which linearized
     intensity count values should be divided to produce
     true photon counts.
;
_name.category_id                       array_intensities
_name.object_id                         gain
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             counts_per_photon

save_


save__array_intensities.gain_esd

_definition.id                          '_array_intensities.gain_esd'
loop_
  _alias.definition_id
         '_array_intensities.gain_su' 
_definition.update                      2014-07-30
_description.text                       
;
   The standard uncertainty (esd) of detector 'gain'.
;
_name.category_id                       array_intensities
_name.object_id                         gain_su
_name.linked_item_id                    '_array_intensities.gain'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real
_units.code                             counts_per_photon

save_


save__array_intensities.linearity

_definition.id                          '_array_intensities.linearity'
_definition.update                      2014-07-07
_description.text                       
;
     The intensity linearity scaling method used to convert
     from the raw intensity to the stored element value:
;
_name.category_id                       array_intensities
_name.object_id                         linearity
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         linear    .         
         offset    
;    The value defined by  _array_intensities.offset should
     be added to each element value.
;        
         scaling   
;    The value defined by _array_intensities.scaling should be
     multiplied with each element value.
;        
         scaling_offset      
;    The combination of the scaling and offset
     with the scale factor applied before the offset value.
;        
         sqrt_scaled         
;    The square root of raw intensities multiplied by
     _array_intensities.scaling is calculated and stored,
     perhaps rounded to the nearest integer. Thus,
     linearization involves dividing the stored values by 
     _array_intensities.scaling and squaring the result.
;        
         logarithmic_scaled  
;    The logarithm base 10 of raw intensities multiplied by
     _array_intensities.scaling  is calculated and stored,
     perhaps rounded to the nearest integer. Thus,
     linearization involves dividing the stored values by
     _array_intensities.scaling and calculating 10 to the
     power of this number.
;        
         raw       
;    The array consists of raw values to which no corrections have
     been applied.  While the handling of the data is similar to
     that given for 'linear' data with no offset, the meaning of
     the data differs in that the number of incident photons is
     not necessarily linearly related to the number of counts
     reported.  This value is intended for use either in
     calibration experiments or to allow for handling more
     complex data-fitting algorithms than are allowed for by
     this data item.
; 

save_


save__array_intensities.offset

_definition.id                          '_array_intensities.offset'
_definition.update                      2014-07-07
_description.text                       
;
     Offset value to add to array element values in the manner
     described by the item _array_intensities.linearity.
;
_name.category_id                       array_intensities
_name.object_id                         offset
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__array_intensities.overload

_definition.id                          '_array_intensities.overload'
_definition.update                      2014-07-07
_description.text                       
;
     The saturation intensity level for this data array.
;
_name.category_id                       array_intensities
_name.object_id                         overload
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Count

save_


save__array_intensities.pixel_binning_method

_definition.id                          '_array_intensities.pixel_binning_method'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _array_intensities.pixel_binning_method specifies
     the method used to derive array elements from multiple pixels.
;
_name.category_id                       array_intensities
_name.object_id                         pixel_binning_method
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         hardware  
;    The element intensities were derived from the raw data of one
     or more pixels by used of hardware in the detector, e.g. by use
     of shift registers in a CCD to combine pixels into super-pixels.
;        
         software  
;    The element intensities were derived from the raw data of more
     than one pixel by use of software.
;        
         combined  
;    The element intensities were derived from the raw data of more
     than one pixel by use of both hardware and software, as when
     hardware binning is used in one direction and software in the
     other.
;        
         none      
;    In the both directions, the data has not been binned.  The
     number of pixels is equal to the number of elements.
     When the value of _array_intensities.pixel_binning_method is
     'none' the values of _array_intensities.pixel_fast_bin_size
     and _array_intensities.pixel_slow_bin_size both must be 1.
;        
         unspecified         '    The method used to derive element intensities is not specified.'
_enumeration.default                    unspecified

save_


save__array_intensities.pixel_fast_bin_size

_definition.id                          '_array_intensities.pixel_fast_bin_size'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _array_intensities.pixel_fast_bin_size specifies
     the number of pixels that compose one element in the direction
     of the most rapidly varying array dimension.
     Typical values are 1, 2, 4 or 8.  When there is 1 pixel per
     array element in both directions, the value given for
     _array_intensities.pixel_binning_method normally should be 'none'.
     It is specified as a float to allow for binning algorithms that
     create array elements that are not integer multiples of the
     detector pixel size.
;
_name.category_id                       array_intensities
_name.object_id                         pixel_fast_bin_size
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Count
_enumeration.default                    1.
_units.code                             pixels_per_element

save_


save__array_intensities.pixel_slow_bin_size

_definition.id                          '_array_intensities.pixel_slow_bin_size'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _array_intensities.pixel_slow_bin_size specifies
     the number of pixels that compose one element in the direction
     of the second most rapidly varying array dimension.
     Typical values are 1, 2, 4 or 8.  When there is 1 pixel per
     array element in both directions, the value given for
     _array_intensities.pixel_binning_method normally should be 'none'.
     It is specified as a float to allow for binning algorithms that
     create array elements that are not integer multiples of the
     detector pixel size.
;
_name.category_id                       array_intensities
_name.object_id                         pixel_slow_bin_size
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Count
_enumeration.default                    1.
_units.code                             pixels_per_element

save_


save__array_intensities.scaling

_definition.id                          '_array_intensities.scaling'
_definition.update                      2014-07-07
_description.text                       
;
     Multiplicative scaling value to be applied to array data
     in the manner described by item _array_intensities.linearity.
;
_name.category_id                       array_intensities
_name.object_id                         scaling
_type.purpose                           Number
_type.source                            Assigned
_type.container                         Single
_type.contents                          Real

save_


save__array_intensities.undefined_value

_definition.id                          '_array_intensities.undefined_value'
_definition.update                      2014-07-07
_description.text                       
;
     A value to be substituted for undefined values in
     the data array.
;
_name.category_id                       array_intensities
_name.object_id                         undefined_value
_type.purpose                           Number
_type.source                            Assigned
_type.container                         Single
_type.contents                          Real

save_


save__array_intensities.variant

_definition.id                          '_array_intensities.variant'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _array_intensities.variant gives the variant
    to which the given ARRAY_INTENSITIES row is related.
    If this value is not given, the variant is assumed to the default
    null variant.  This item is a pointer to _variant.variant in the
    VARIANT category.
;
_name.category_id                       array_intensities
_name.object_id                         variant
_name.linked_item_id                    '_variant.variant'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_ARRAY_STRUCTURE

_definition.id                          ARRAY_STRUCTURE
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the ARRAY_STRUCTURE category record the organization and
     encoding of array data that may be stored in the ARRAY_DATA category.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         ARRAY_STRUCTURE
_category.key_id                        '_array_structure.id'
_category.key_list ['_array_structure.id']

save_


save__array_structure.byte_order

_definition.id                          '_array_structure.byte_order'
_definition.update                      2014-07-07
_description.text                       
;
     The order of bytes for integer values which require more
     than 1 byte.
     (IBM-PC's and compatibles and DEC VAXs use low-byte-first
     ordered integers, whereas Hewlett Packard 700
     series, Sun-4 and Silicon Graphics use high-byte-first
     ordered integers.  DEC Alphas can produce/use either
     depending on a compiler switch.)
;
_name.category_id                       array_structure
_name.object_id                         byte_order
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         big_endian          
;       The first byte in the byte stream of the bytes which make up an
        integer value is the most significant byte of an integer.
;        
         little_endian       
;       The last byte in the byte stream of the bytes which make up an
        integer value is the most significant byte of an integer.
; 

save_


save__array_structure.compression_type

_definition.id                          '_array_structure.compression_type'
_definition.update                      2014-07-07
_description.text                       
;
    Type of data-compression method used to compress the array
    data.
;
_name.category_id                       array_structure
_name.object_id                         compression_type
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         byte_offset         
;       Using the 'byte_offset' compression scheme as per A. Hammersley
        and the CBFlib manual, section 3.3.3
;        
         canonical           
;       Using the 'canonical' compression scheme (International Tables
        for Crystallography Volume G, Section 5.6.3.1) and CBFlib
        manual section 3.3.1
;        
         nibble_offset       
;       Using the 'nibble_offset' compression scheme as per H. Bernstein
        and the CBFlib manual, section 3.3.4
;        
         none      
;       Data are stored in normal format as defined by
        _array_structure.encoding_type and
        _array_structure.byte_order.
;        
         packed    
;       Using the 'packed' compression scheme, a CCP4-style packing
        as per J. P. Abrahams pack_c.c and CBFlib manual, section 3.3.2.
;        
         packed_v2           
;       Using the 'packed' compression scheme, version 2, as per
        J. P. Abrahams pack_c.c and CBFlib manual, section 3.3.2.
; 
_enumeration.default                    none

save_


save__array_structure.compression_type_flag

_definition.id                          '_array_structure.compression_type_flag'
_definition.update                      2014-07-07
_description.text                       
;
    Flags modifying the type of data-compression method used to
    compress the arraydata.
;
_name.category_id                       array_structure
_name.object_id                         compression_type_flag
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         uncorrelated_sections         
;       When applying packed or packed_v2 compression on an array with
        uncorrelated sections, do not average in points from the prior
        section.
;        
         flat      
;       When applying packed or packed_v2 compression on an array with
        treat the entire image as a single line set the maximum number
        of bits for an offset to 65 bits.
        The flag is included for compatibility with software prior to
        CBFlib_0.7.7, and should not be used for new data sets.
; 

save_


save__array_structure.encoding_type

_definition.id                          '_array_structure.encoding_type'
_definition.update                      2014-07-07
_description.text                       
;
     Data encoding of a single element of array data.
     The type 'unsigned 1-bit integer' is used for
     packed Booleans arrays for masks.  Each element
     of the array corresponds to a single bit
     packed in unsigned 8-bit data.
     In several cases, the IEEE format is referenced.
     See IEEE Standard 754-1985 (IEEE, 1985).
     Ref: IEEE (1985). IEEE Standard for Binary Floating-Point
     Arithmetic. ANSI/IEEE Std 754-1985. New York: Institute of
     Electrical and Electronics Engineers.
;
_name.category_id                       array_structure
_name.object_id                         encoding_type
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
         'unsigned 1-bit integer'      
         'unsigned 8-bit integer'      
         'signed 8-bit integer'        
         'unsigned 16-bit integer'     
         'signed 16-bit integer'       
         'unsigned 32-bit integer'     
         'signed 32-bit integer'       
         'signed 32-bit real IEEE'     
         'signed 64-bit real IEEE'     
         'signed 32-bit complex IEEE' 

save_


save__array_structure.id

_definition.id                          '_array_structure.id'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _array_structure.id must uniquely identify
    each item of array data.
    This item has been made implicit and given a default value of 1
    as a convenience in writing miniCBF files.  Normally an
    explicit name with useful content should be used.
;
_name.category_id                       array_structure
_name.object_id                         id
_type.purpose                           Encode
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
_enumeration.default                    1
_name.linked_item_id                    ''

save_


save_ARRAY_STRUCTURE_LIST

_definition.id                          ARRAY_STRUCTURE_LIST
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     The ARRAY_STRUCTURE_LIST category record the size
     and organization of each array dimension.
     The relationship to physical axes may be given.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         ARRAY_STRUCTURE_LIST
_category.key_id                        '_array_structure_list.id'
_category.key_list ['_array_structure_list.array_id'  
                   '_array_structure_list.index']
_name.linked_item_id                    ''

save_


save__array_structure_list.array_id

_definition.id                          '_array_structure_list.array_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure.id in the
    ARRAY_STRUCTURE category.
;
_name.category_id                       array_structure_list
_name.object_id                         array_id
_name.linked_item_id                    '_array_structure.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_structure_list.array_section_id

_definition.id                          '_array_structure_list.array_section_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure_list_section.id in the
    ARRAY_STRUCTURE_LIST_SECTION category.
;
_name.category_id                       array_structure_list
_name.object_id                         array_section_id
_name.linked_item_id                    '_array_structure_list_section.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_structure_list.axis_set_id

_definition.id                          '_array_structure_list.axis_set_id'
_definition.update                      2014-07-07
_description.text                       
;
     This is a descriptor for the physical axis or set of axes
     corresponding to an array index.
     This data item is related to the axes of the detector
     itself given in DIFFRN_DETECTOR_AXIS, but usually differs
     in that the axes in this category are the axes of the
     coordinate system of reported data points, while the axes in
     DIFFRN_DETECTOR_AXIS are the physical axes
     of the detector describing the 'poise' of the detector as an
     overall physical object.
     If there is only one axis in the set, the identifier of
     that axis should be used as the identifier of the set.
;
_name.category_id                       array_structure_list
_name.object_id                         axis_set_id
_type.purpose                           Encode
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code

save_


save__array_structure_list.dimension

_definition.id                          '_array_structure_list.dimension'
_definition.update                      2014-07-07
_description.text                       
;
     The number of elements stored in the array structure in
     this dimension.
;
_name.category_id                       array_structure_list
_name.object_id                         dimension
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Count

save_


save__array_structure_list.direction

_definition.id                          '_array_structure_list.direction'
_definition.update                      2014-07-07
_description.text                       
;
    Identifies the direction in which this array index changes.
;
_name.category_id                       array_structure_list
_name.object_id                         direction
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         increasing          '        Indicates the index changes from 1 to the maximum dimension.'         
         decreasing          '        Indicates the index changes from the maximum dimension to 1.'

save_


save__array_structure_list.id

_definition.id                          '_array_structure_list.id'
_name.object_id                         id
_name.category_id                       array_structure_list
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Key
_type.source                            Derived
_type.container                         Multiple
_type.contents                          Code
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_array_structure_list.id = [_array_structure_list.array_id, _array_structure_list.index]

; 

save_


save__array_structure_list.index

_definition.id                          '_array_structure_list.index'
_definition.update                      2014-07-07
_description.text                       
;
     Identifies the one-based index of the row or column in the
     array structure.
;
_name.category_id                       array_structure_list
_name.object_id                         index
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Integer
_enumeration.range                      1:

save_


save__array_structure_list.precedence

_definition.id                          '_array_structure_list.precedence'
_definition.update                      2014-07-07
_description.text                       
;
     Identifies the rank order in which this array index changes
     with respect to other array indices.  The precedence of 1
     indicates the index which changes fastest.
;
_name.category_id                       array_structure_list
_name.object_id                         precedence
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Integer
_enumeration.range                      1:

save_


save_ARRAY_STRUCTURE_LIST_AXIS

_definition.id                          ARRAY_STRUCTURE_LIST_AXIS
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the ARRAY_STRUCTURE_LIST_AXIS category describe
     the physical settings of sets of axes for the centres of pixels that
     correspond to data points described in the
     ARRAY_STRUCTURE_LIST category.
     In the simplest cases, the physical increments of a single axis correspond
     to the increments of a single array index.  More complex organizations,
     e.g. spiral scans, may require coupled motions along multiple axes.
     Note that a spiral scan uses two coupled axes: one for the angular
     direction and one for the radial direction.  This differs from a
     cylindrical scan for which the two axes are not coupled into one
     set.
     Axes may be specified wither for an entire array or for just a section
     of an array.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         ARRAY_STRUCTURE_LIST_AXIS
_category.key_id                        '_array_structure_list_axis.id'
_category.key_list ['_array_structure_list_axis.axis_set_id'  
                   '_array_structure_list_axis.axis_id']

save_


save__array_structure_list_axis.angle

_definition.id                          '_array_structure_list_axis.angle'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in degrees for the first
     data point of the array index with the corresponding value
     of _array_structure_list.axis_set_id.  If the index is
     specified as 'increasing', this will be the centre of the
     pixel with index value 1.  If the index is specified as
     'decreasing', this will be the centre of the pixel with
     maximum index value.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         angle
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__array_structure_list_axis.angle_increment

_definition.id                          '_array_structure_list_axis.angle_increment'
_definition.update                      2014-07-07
_description.text                       
;
     The pixel-centre-to-pixel-centre increment in the angular
     setting of the specified axis in degrees.  This is not
     meaningful in the case of 'constant velocity' spiral scans
     and should not be specified for this case.
     See _array_structure_list_axis.angular_pitch.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         angle_increment
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__array_structure_list_axis.angular_pitch

_definition.id                          '_array_structure_list_axis.angular_pitch'
_definition.update                      2014-07-07
_description.text                       
;
     The pixel-centre-to-pixel-centre distance for a one-step
     change in the setting of the specified axis in millimetres.
     This is meaningful only for 'constant velocity' spiral scans
     or for uncoupled angular scans at a constant radius
     (cylindrical scans) and should not be specified for cases
     in which the angle between pixels (rather than the distance
     between pixels) is uniform.
     See _array_structure_list_axis.angle_increment.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         angular_pitch
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__array_structure_list_axis.axis_id

_definition.id                          '_array_structure_list_axis.axis_id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of one of
     the axes in the set of axes for which settings are being specified.
     Multiple axes may be specified for the same value of
     _array_structure_list_axis.axis_set_id.
     This item is a pointer to _axis.id in the AXIS category.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         axis_id
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_structure_list_axis.axis_set_id

_definition.id                          '_array_structure_list_axis.axis_set_id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of the
     set of axes for which axis settings are being specified.
     Multiple axes may be specified for the same value of
     _array_structure_list_axis.axis_set_id.
     This item is a pointer to _array_structure_list.axis_set_id
     in the ARRAY_STRUCTURE_LIST category.
     If this item is not specified, it defaults to the corresponding
     axis identifier.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         axis_set_id
_name.linked_item_id                    '_array_structure_list.axis_set_id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_structure_list_axis.displacement

_definition.id                          '_array_structure_list_axis.displacement'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in millimetres for the first
     data point of the array index with the corresponding value
     of _array_structure_list.axis_set_id.  If the index is
     specified as 'increasing', this will be the centre of the
     pixel with index value 1.  If the index is specified as
     'decreasing', this will be the centre of the pixel with
     maximum index value.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         displacement
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__array_structure_list_axis.displacement_increment

_definition.id                          '_array_structure_list_axis.displacement_increment'
_definition.update                      2014-07-07
_description.text                       
;
     The pixel-centre-to-pixel-centre increment for the displacement
     setting of the specified axis in millimetres.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         displacement_increment
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__array_structure_list_axis.fract_displacement

_definition.id                          '_array_structure_list_axis.fract_displacement'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis as a decimal fraction of
     the axis unit vector for the first data point of the array index 
     with the corresponding value of _array_structure_list.axis_set_id.
     If the index is specified as 'increasing', this will be the
     centre of the pixel with index value 1.  If the index is
     specified as 'decreasing', this will be the centre of the
     pixel with maximum index value.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         fract_displacement
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0

save_


save__array_structure_list_axis.fract_displacement_increment

_definition.id                          '_array_structure_list_axis.fract_displacement_increment'
_definition.update                      2014-07-07
_description.text                       
;
     The pixel-centre-to-pixel-centre increment for the displacement
     setting of the specified axis as a decimal fraction of the
     axis unit vector.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         fract_displacement_increment
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__array_structure_list_axis.id

_definition.id                          '_array_structure_list_axis.id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is a unique identifier to the items
     in this category.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         id
_type.purpose                           Key
_type.source                            Assigned
_type.container                         List
_type.contents                          Text
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_array_structure_list_axis.id = [_array_structure_list_axis.axis_set_id,
                                 _array_structure_list_axis.axis_id]

; 

save_


save__array_structure_list_axis.radial_pitch

_definition.id                          '_array_structure_list_axis.radial_pitch'
_definition.update                      2014-07-07
_description.text                       
;
     The radial distance from one 'cylinder' of pixels to the
     next in millimetres.  If the scan is a 'constant velocity'
     scan with differing angular displacements between pixels,
     the value of this item may differ significantly from the
     value of _array_structure_list_axis.displacement_increment.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         radial_pitch
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__array_structure_list_axis.reference_angle

_definition.id                          '_array_structure_list_axis.reference_angle'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _array_structure_list_axis.reference_angle
     specifies the setting of the angle of this axis used for
     determining a reference beam center and a reference detector
     distance.  It is normally expected to be identical to the
     value of _array_structure_list_axis.angle.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         reference_angle
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             degrees

save_


save__array_structure_list_axis.reference_displacement

_definition.id                          '_array_structure_list_axis.reference_displacement'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _array_structure_list_axis.reference_displacement
     specifies the setting of the displacement of this axis used
     for determining a reference beam center and a reference detector
     distance.  It is normally expected to be identical to the value
     of _array_structure_list_axis.displacement.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         reference_displacement
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             millimetres

save_


save__array_structure_list_axis.variant

_definition.id                          '_array_structure_list_axis.variant'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _array_structure_list_axis.variant gives the variant
    to which the given ARRAY_STRUCTURE_LIST_AXIS row is related.
    If this value is not given, the variant is assumed to the default
    null variant.  This item is a pointer to _variant.variant in the
    VARIANT category.
;
_name.category_id                       array_structure_list_axis
_name.object_id                         variant
_name.linked_item_id                    '_variant.variant'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_ARRAY_STRUCTURE_LIST_SECTION

_definition.id                          ARRAY_STRUCTURE_LIST_SECTION
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the ARRAY_STRUCTURE_LIST_SECTION category identify
     the dimension-by-dimension start, end and stride of each section of an
     array that is to be referenced.
     For any array of array_id, ARRAYID, array section ids of the form
     ARRAYID(start1:end1:stride1,start2:end2:stride2, ...) are defined
     by default.
     For the given index, the elements in
     the section are of indices:  _array_structure_list_section.start,
       _array_structure_list_section.start
         +_array_structure_list_section.stride,
       _array_structure_list_section.start
        +2*_array_structure_list_section.stride,
       ...
     stopping either when the indices leave the limits of the indices 
     of that dimension
     or [min(_array_structure_list_section.start,
     _array_structure_list_section.end),
     max(_array_structure_list_section.start,
     _array_structure_list_section.end)].

     The ordering of these elements is determined by the overall ordering of
     _array_structure_list_section.array_id and not by the ordering implied 
     by the stride.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         ARRAY_STRUCTURE_LIST_SECTION
_category.key_id                        '_array_structure_list_section.key'
_category.key_list ['_array_structure_list_section.id'  
                   '_array_structure_list_section.array_id'  
                   '_array_structure_list_section.index']

save_


save__array_structure_list_section.array_id

_definition.id                          '_array_structure_list_section.array_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure.id in the
    ARRAY_STRUCTURE category.
;
_name.category_id                       array_structure_list_section
_name.object_id                         array_id
_name.linked_item_id                    '_array_structure.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__array_structure_list_section.end

_definition.id                          '_array_structure_list_section.end'
_definition.update                      2014-07-07
_description.text                       
;
     Identifies the ending ordinal, numbered from 1, for an array
     element of index _array_structure_list_section.index in the section.
     The value defaults to the dimension for index
     _array_structure_list_section.index of the array.
     Note that this agrees with the Fortran convention, rather than
     the Python convention in that, if compatible with the stride,
     the end element is included in the section as in Fortran, rather
     than being one beyond the section as in Python.
;
_name.category_id                       array_structure_list_section
_name.object_id                         end
_name.linked_item_id                    '_array_structure_list.index'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_enumeration.range                      1:

save_


save__array_structure_list_section.id

_definition.id                          '_array_structure_list_section.id'
_definition.update                      2014-07-07
_description.text                       
;
    Uniquely identifies the array section chosen.
    To avoid confusion array section IDs that contain parentheses
    should conform to the default syntax
    ARRAYID(start1:end1:stride1,start2:end2:stride2, ...)
;
_name.category_id                       array_structure_list_section
_name.object_id                         id
_type.purpose                           Encode
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code

save_


save__array_structure_list_section.index

_definition.id                          '_array_structure_list_section.index'
_definition.update                      2014-07-07
_description.text                       
;
This item is a pointer to _array_structure_list.index
    in the ARRAY_STRUCTURE_LIST category.
    Identifies the one-based index of the row, column, sheet ...
    the ARRAY_STRUCTURE_LIST category.
    For a multidimensional array, a value must be explicitly given.
    If an index is omitted from section then all elements for that
    index are assumed to be included in the section.
;
_name.category_id                       array_structure_list_section
_name.object_id                         index
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Integer
_enumeration.range                      1:

save_


save__array_structure_list_section.start

_definition.id                          '_array_structure_list_section.start'
_definition.update                      2014-07-07
_description.text                       
;
     Identifies the starting ordinal, numbered from 1,
     for an array element of index _array_structure_list_section.index
     in the section.
     The value defaults to 1.   For the given index, the elements in
     the section are of indices:  _array_structure_list_section.start,
         _array_structure_list_section.start
           +_array_structure_list_section.stride,
         _array_structure_list_section.start
           +2*_array_structure_list_section.stride,
         ...
     stopping either when the indices leave the limits of the indices
     or [min(_array_structure_list_section.start,
           _array_structure_list_section.end),
         max(_array_structure_list_section.start,
           _array_structure_list_section.end)].
     The ordering of these elements is determined by the overall order
     _array_structure_list_section.array_id and not by the ordering im
     stride.
;
_name.category_id                       array_structure_list_section
_name.object_id                         start
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Integer
_enumeration.range                      1:

save_


save__array_structure_list_section.stride

_definition.id                          '_array_structure_list_section.stride'
_definition.update                      2014-07-07
_description.text                       
;
    Identifies the incremental steps to be taken when moving
    element to element in the section in that particular
    dimension.  The value of _array_structure_list_section.stride may
    positive or negative.  If the stride is zero, the section is
    just defined by _array_structure_list_section.start.
;
_name.category_id                       array_structure_list_section
_name.object_id                         stride
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Integer
_enumeration.default                    1

save_


save_AXIS

_definition.id                          AXIS
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the AXIS category record the information required
     to describe the various goniometer, detector, source and other
     axes needed to specify a data collection or the axes defining the
     coordinate system of an image.

     The location of each axis is specified by two vectors: the axis
     itself, given by a  unit vector in the direction of the axis, and
     an offset to the base of the unit vector.

     The vectors defining an axis are referenced to an appropriate
     coordinate system.  The axis vector, itself, is a dimensionless
     unit vector.  Where meaningful, the offset vector is given in
     millimetres.  In coordinate systems not measured in metres,
     the offset is not specified and is taken as zero.

     The available coordinate systems are:

         The imgCIF standard laboratory coordinate system
         The direct lattice (fractional atomic coordinates)
         The orthogonal Cartesian coordinate system (real space)
         The reciprocal lattice
         An abstract orthogonal Cartesian coordinate frame

     For consistency in this discussion, we call the three coordinate
     system axes X, Y and Z.  This is appropriate for the imgCIF
     standard laboratory coordinate system, and last two Cartesian
     coordinate systems, but for the direct lattice, X corresponds
     to a, Y to b and Z to c, while for the reciprocal lattice,
     X corresponds to a*, Y to b* and Z to c*.

     For purposes of visualization, all the coordinate systems are
     taken as right-handed, i.e., using the convention that the extended
     thumb of a right hand could point along the first (X) axis, the
     straightened pointer finger could point along the second (Y) axis
     and the middle finger folded inward could point along the third (Z)
     axis.

     THE IMGCIF STANDARD LABORATORY COORDINATE SYSTEM

     The imgCIF standard laboratory coordinate system is a right-handed
     orthogonal coordinate similar to the MOSFLM coordinate system,
     but imgCIF puts Z along the X-ray beam, rather than putting X along the
     X-ray beam as in MOSFLM.

     The vectors for the imgCIF standard laboratory coordinate system
     form a right-handed Cartesian coordinate system with its origin
     in the sample or specimen.  The origin of the axis system should,
     if possible, be defined in terms of mechanically stable axes to be
     be both in the sample and in the beam.  If the sample goniometer or other
     sample positioner has two axes the intersection of which defines a
     unique point at which the sample should be mounted to be bathed
     by the beam, that will be the origin of the axis system.  If no such
     point is defined, then the midpoint of the line of intersection
     between the sample and the center of the beam will define the origin.
     For this definition the sample positioning system will be set at
     its initial reference position for the experiment.


                             | Y (to complete right-handed system)
                             |
                             |
                             |
                             |
                             |
                             |________________X
                            /       principal goniometer axis
                           /
                          /
                         /
                        /
                       /Z (to source)


     Axis 1 (X): The X-axis is aligned to the mechanical axis pointing from
     the sample or specimen along the  principal axis of the goniometer or
     sample positioning system if the sample positioning system has an axis
     that intersects the origin and which form an angle of more than 22.5
     degrees with the beam axis.

     Axis 2 (Y): The Y-axis completes an orthogonal right-handed system
     defined by the X-axis and the Z-axis (see below).

     Axis 3 (Z): The Z-axis is derived from the source axis which goes from
     the sample to the source.  The Z-axis is the component of the source axis
     in the direction of the source orthogonal to the X-axis in the plane
     defined by the X-axis and the source axis.

     If the conditions for the X-axis can be met, the coordinate system
     will be based on the goniometer or other sample positioning system
     and the beam and not on the orientation of the detector, gravity etc.
     The vectors necessary to specify all other axes are given by sets of
     three components in the order (X, Y, Z).
     If the axis involved is a rotation axis, it is right-handed, i.e. as
     one views the object to be rotated from the origin (the tail) of the
     unit vector, the rotation is clockwise.  If a translation axis is
     specified, the direction of the unit vector specifies the sense of
     positive translation.

     Note:  This choice of coordinate system is similar to but significantly
     different from the choice in MOSFLM (Leslie & Powell, 2004).  In MOSFLM,
     X is along the X-ray beam (the CBF/imgCIF Z axis) and Z is along the
     rotation axis.

     In some experimental techniques, there is no goniometer or the principal
     axis of the goniometer is at a small acute angle with respect to
     the source axis.  In such cases, other reference axes are needed
     to define a useful coordinate system.  The order of priority in
     defining directions in such cases is to use the detector, then
     gravity, then north.


     If the X-axis cannot be defined as above, then the
     direction (not the origin) of the X-axis should be parallel to the axis
     of the primary detector element corresponding to the most rapidly
     varying dimension of that detector element's data array, with its
     positive sense corresponding to increasing values of the index for
     that dimension.  If the detector is such that such a direction cannot
     be defined (as with a point detector) or that direction forms an
     angle of less than 22.5 degrees with respect to the source axis, then
     the X-axis should be chosen so that if the Y-axis is chosen
     in the direction of gravity, and the Z-axis is chosen to be along
     the source axis, a right-handed orthogonal coordinate system is chosen.
     In the case of a vertical source axis, as a last resort, the
     X-axis should be chosen to point North.

     All rotations are given in degrees and all translations are given in mm.

     Axes may be dependent on one another.  The X-axis is the only goniometer
     axis the direction of which is strictly connected to the hardware.  All
     other axes are specified by the positions they would assume when the
     axes upon which they depend are at their zero points.

     When specifying detector axes, the axis is given to the beam centre.
     The location of the beam centre on the detector should be given in the
     DIFFRN_DETECTOR category in distortion-corrected millimetres from
     the (0,0) corner of the detector.

     For convenience when describing detector element (module) placement,
     and optional mounting rotation axis and rotation angle may be
     specified.  In such cases, the mounting rotation axis and angle
     of rotation around the mounting rotation axis are applied after
     applying the transformations upon which the given axis depends.

     It should be noted that many different origins arise in the definition
     of an experiment.  In particular, as noted above, it is necessary to
     specify the location of the beam centre on the detector in terms
     of the origin of the detector, which is, of course, not coincident
     with the centre of the sample.

     The unit cell, reciprocal cell and crystallographic orthogonal
     Cartesian coordinate system are defined by the CELL and the matrices
     in the ATOM_SITES category.
   
     THE DIRECT LATTICE (FRACTIONAL COORDINATES)

     The direct lattice coordinate system is a system of fractional
     coordinates aligned to the crystal, rather than to the laboratory.
     This is a natural coordinate system for maps and atomic coordinates.
     It is the simplest coordinate system in which to apply symmetry.
     The axes are determined by the cell edges, and are not necessarily
     othogonal.  This coordinate system is not uniquely defined and
     depends on the cell parameters in the CELL category and the
     settings chosen to index the crystal.

     Molecules in a crystal studied by X-ray diffracraction are organized
     into a repeating regular array of unit cells.  Each unit cell is defined
     by three vectors, a, b and c.  To quote from Drenth,


     "The choice of the unit cell is not unique and therefore, guidelines
     have been established for selecting the standard basis vectors and
     the origin.  They are based on symmetry and metric considerations:

      "(1)  The axial system should be right handed.
       (2)  The basis vectors should coincide as much as possible with
       directions of highest symmetry."
       (3)  The cell taken should be the smallest one that satisfies
       condition (2)
       (4)  Of all the lattice vectors, none is shorter than a.
       (5)  Of those not directed along a, none is shorter than b.
       (6)  Of those not lying in the ab plane, none is shorter than c.
       (7)  The three angles between the basis vectors a, b and c are
       either all acute (<90\%) or all obtuse (>=90\%)."

     These rules do not produce a unique result that is stable under
     the assumption of experimental errors, and the the resulting cell
     may not be primitive.

     In this coordinate system, the vector (.5, .5, .5) is in the middle
     of the given unit cell.

     Grid coordinates are an important variation on fractional coordinates
     used when working with maps.  In imgCIF, the conversion from
     fractional to grid coordinates is implicit in the array indexing
     specified by _array_structure_list.dimension.  Note that this
     implicit grid-coordinate scheme is 1-based, not zero-based, i.e.
     the origin of the cell for axes along the cell edges with no
     specified _array_structure_list_axis.displacement will have
     grid coordinates of (1,1,1), i.e. array indices of (1,1,1).

     THE ORTHOGONAL CARTESIAN COORDINATE SYSTEM (REAL SPACE)

     The orthogonal Cartesian coordinate system is a transformation of
     the direct lattice to the actual physical coordinates of atoms in
     space.  It is similar to the laboratory coordinate system, but
     is anchored to and moves with the crystal, rather than being
     schored to the laboratory.  The transformation from fractional
     to orthogonal cartesian coordinates is given by the
              _atom_sites.Cartn_transf_matrix[i][j]  and
              _atom_sites.Cartn_transf_vector[i]
     tags.  A common choice for the matrix of the transformation is
     given in the 1992 PDB format document

              | a      b cos(\g)   c cos(\b)                            |
              | 0      b sin(\g)   c (cos(\a) - cos(\b)cos(\g))/sin(\g) |
              | 0      0           V/(a b sin(\g))                      |

     This is a convenient coordinate system in which to do fitting
     of models to maps and in which to understand the chemistry of
     a molecule.

     THE RECIPROCAL LATTICE

     The reciprocal lattice coordinate system is used for diffraction
     intensitities.  It is based on the reciprocal cell, the dual of the cell,
     in which reciprocal cell edges are derived from direct cell faces:

        a* = bc sin(\a)/V  b* = ac sin(\b)/V  c* = ab sin(\g)/V
        cos(\a*) = (cos(\b) cos(\g) - cos(\a))/(sin(\b) sin(\g))
        cos(\b*) = (cos(\a) cos(\g) - cos(\b))/(sin(\a) sin(\g))
        cos(\g*) = (cos(\a) cos(\b) - cos(\g))/(sin(\a) sin(\b))
        V = abc SQRT(1 - cos(\a)^2^
                       - cos(\b)^2^
                       - cos(\g)^2^
                       + 2 cos(\a) cos(\b) cos(\g) )

     In this form the dimensions of the reciprocal lattice are in reciprocal
     \%Angstroms (\%A^-1^).  A dimensionless form can be obtained by
     multiplying by the wavelength.  Reflections are commonly indexed against
     this coordinate system as (h, k, l) triples.


     References:

     Drenth, J., "Introduction to basic crystallography." chapter
     2.1 in Rossmann, M. G. and Arnold, E. "Crystallography of
     biological macromolecules", Volume F of the IUCr's "International
     tables for crystallography", Kluwer, Dordrecht 2001, pp 44 -- 63

     Leslie, A. G. W. and Powell, H. (2004). MOSFLM v6.11.
     MRC Laboratory of Molecular Biology, Hills Road, Cambridge, England.
     http://www.CCP4.ac.uk/dist/X-windows/Mosflm/.

     Stout, G. H. and Jensen, L. H., "X-ray structure determination",
     2nd ed., Wiley, New York, 1989, 453 pp.

     __, "PROTEIN DATA BANK ATOMIC COORDINATE AND BIBLIOGRAPHIC ENTRY
     FORMAT DESCRIPTION," Brookhaven National Laboratory, February 1992.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         AXIS
_category.key_id                        '_axis.key'
_category.key_list ['_axis.id'  '_axis.equipment']

save_


save__axis.depends_on

_definition.id                          '_axis.depends_on'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _axis.depends_on specifies the next outermost
    axis upon which this axis depends, unless
    _axis.rotation_axis is specified, in which case, 
    _axis.rotation_axis is next outermost and _axis.depends_on 
    is second outermost.
    This item is a pointer to _axis.id in the same category.
;
_name.category_id                       axis
_name.object_id                         depends_on
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__axis.equipment

_definition.id                          '_axis.equipment'
_definition.update                      2014-07-07
_description.text                       
;
    The value of  _axis.equipment specifies the type of
    equipment using the axis:  'goniometer', 'detector',
    'gravity', 'source' or 'general'.
;
_name.category_id                       axis
_name.object_id                         equipment
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         goniometer          'equipment used to orient or position samples'    
         detector  'equipment used to detect reflections'  
         general   'equipment used for general purposes'   
         gravity   'axis specifying the downward direction'          
         source    'axis specifying the direction sample to source' 
_enumeration.default                    general

save_


save__axis.equipment_component

_definition.id                          '_axis.equipment_component'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _axis.equipment_component specifies
    an arbitrary identifier of a component of the equipment to which
    the axis belongs, such as 'detector_arm' or 'detector_module'.

;
_name.category_id                       axis
_name.object_id                         equipment_component
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text

save_


save__axis.id

_definition.id                          '_axis.id'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _axis.id must uniquely identify
    each axis relevant to the experiment.  Note that multiple
    pieces of equipment may share the same axis (e.g. a twotheta
    arm), so the category key for AXIS also includes the equipment.
;
_name.category_id                       axis
_name.object_id                         id
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code

save_


save__axis.offset

_definition.id                          '_axis.offset'
_definition.update                      2014-06-20
_description.text                       
;
     The three-element vector used to specify the offset to the
     base of a rotation or translation axis; specified in millimetres.
;
_name.category_id                       axis
_name.object_id                         offset
_type.purpose                           Number
_type.source                            derived
_type.container                         Matrix
_type.contents                          Real
_type.dimension [3]
_units.code                             millimetres
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_axis.offset = [ _axis.offset_1, _axis.offset_2, _axis.offset_3 ]

;        
         Evaluation          
;
_axis.offset = _axis.offset_convention2 * [[-1,0,0],[0,1,0],[0,0,-1]]

; 

save_


save__axis.offset[1]

_definition.id                          '_axis.offset[1]'
loop_
  _alias.definition_id
         '_axis.offset_1' 
_definition.update                      2014-07-07
_description.text                       
;
     The [1] element of the three-element vector _axis.offset
;
_name.category_id                       axis
_name.object_id                         offset_1
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__axis.offset[2]

_definition.id                          '_axis.offset[2]'
loop_
  _alias.definition_id
         '_axis.offset_2' 
_definition.update                      2014-07-07
_description.text                       
;
     The [2] element of the three-element vector _axis.offset
;
_name.category_id                       axis
_name.object_id                         offset_2
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__axis.offset[3]

_definition.id                          '_axis.offset[3]'
loop_
  _alias.definition_id
         '_axis.offset_3' 
_definition.update                      2014-07-07
_description.text                       
;
     The [3] element of the three-element vector _axis.offset
;
_name.category_id                       axis
_name.object_id                         offset_3
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__axis.offset_convention2

_definition.id                          '_axis.offset_convention2'
_name.object_id                         offset_convention2
_name.category_id                       axis
_definition.class                       Datum
_description.text 
                                        'The axis offset expressed in an alternate coordinate system where Z points along the beam away from the source.'
_name.linked_item_id                    ''
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Array
_type.contents                          Real
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_axis.offset_convention2 = _axis.offset * [[-1,0,0],[0,1,0],[0,0,-1]]

; 

save_


save__axis.rotation

_definition.id                          '_axis.rotation'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _axis.rotation specifies
    the fixed base rotation angle for _axis.rotation_axis
    to which the value of any frame-by-frame setting, if any, should
    be added.  Normally, ony the fixed value would be given.

;
_name.category_id                       axis
_name.object_id                         rotation
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__axis.rotation_axis

_definition.id                          '_axis.rotation_axis'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _axis.rotation_axis specifies and optional 
    addtional dependency for this axis to be applied
    after applying _axis.depends_on.
    This item is a pointer to _axis.id in the same category.
;
_name.category_id                       axis
_name.object_id                         rotation_axis
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__axis.system

_definition.id                          '_axis.system'
_definition.update                      2014-07-07
_description.text                       
;
    The value of  _axis.system specifies the coordinate
    system used to define the axis: 'laboratory', 'direct',
    'orthogonal', 'reciprocal' or 'abstract'.
;
_name.category_id                       axis
_name.object_id                         system
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         laboratory          
;  the axis is referenced to the imgCIF standard laboratory Cartesian
   coordinate system
;        
         direct    '  the axis is referenced to the direct lattice'  
         orthogonal          '  the axis is referenced to the cell Cartesian orthogonal coordinates'        
         reciprocal          '  the axis is referenced to the reciprocal lattice'       
         abstract  '  the axis is referenced to abstract Cartesian cooridinate system'
_enumeration.default                    laboratory

save_


save__axis.type

_definition.id                          '_axis.type'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _axis.type specifies the type of
    axis:  'rotation' or 'translation' (or 'general' when
    the type is not relevant, as for gravity).
;
_name.category_id                       axis
_name.object_id                         type
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         rotation  'right-handed axis of rotation'         
         translation         'translation in the direction of the axis'        
         general   'axis for which the type is not relevant' 
_enumeration.default                    general

save_


save__axis.vector

_definition.id                          '_axis.vector'
_definition.update                      2014-06-20
_description.text                       
;
     The three-element vector used to specify the direction
     of a rotation or translation axis.  The vector should be
     normalized to be a unit vector and is dimensionless.

;
_name.category_id                       axis
_name.object_id                         vector
_type.purpose                           Number
_type.source                            Derived
_type.container                         Matrix
_type.contents                          Real
_type.dimension [3]
_units.code                             none
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_axis.vector = [ _axis.vector_1, _axis.vector_2, _axis.vector_3 ]

;        
         Evaluation          
;
_axis.vector = _axis.vector_convention2 * Array([[-1,0,0],[0,1,0],[0,0,-1]])

; 

save_


save__axis.vector[1]

_definition.id                          '_axis.vector[1]'
loop_
  _alias.definition_id
         '_axis.vector_1' 
_definition.update                      2014-07-07
_description.text                       
;
     The [1] element of the three-element vector _axis.vector
;
_name.category_id                       axis
_name.object_id                         vector_1
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_axis.vector_1 = _axis.vector[0]

; 

save_


save__axis.vector[2]

_definition.id                          '_axis.vector[2]'
loop_
  _alias.definition_id
         '_axis.vector_2' 
_definition.update                      2014-07-07
_description.text                       
;
     The [2] element of the three-element vector _axis.vector
;
_name.category_id                       axis
_name.object_id                         vector_2
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_axis.vector_2 = _axis.vector[1]

; 

save_


save__axis.vector[3]

_definition.id                          '_axis.vector[3]'
loop_
  _alias.definition_id
         '_axis.vector_3' 
_definition.update                      2014-07-07
_description.text                       
;
     The [3] element of the three-element vector _axis.vector
;
_name.category_id                       axis
_name.object_id                         vector_3
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_axis.vector_3 = _axis.vector[2]

; 

save_


save__axis.vector_convention2

_definition.id                          '_axis.vector_convention2'
_name.object_id                         vector_convention2
_name.category_id                       axis
_definition.class                       Datum
_description.text 
                                        'The axis vector expressed in an alternate coordinate system where Z points along the beam away from the source.'
_name.linked_item_id                    ''
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Array
_type.contents                          Real
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_axis.vector_convention2 = _axis.vector * Array([[-1,0,0],[0,1,0],[0,0,-1]])

; 

save_


save_detector_axis

_name.object_id                         detector_axis
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          detector_axis
_definition.scope                       Category
_definition.class                       Loop
_description.text                       
;
Items in the DETECTOR_AXIS category record information for axes that are
attached to detectors. This category is a filtered version of the AXIS
category that exists purely to cater to file formats that distinguish
detector axes from other axes.
;
_category.key_id                        '_detector_axis.axis_id'
loop_
  _category_key.name
         '_detector_axis.axis_id' 
_category_construct.type                Filter
_category_construct.text_filter [detector]
_category_construct.components ['_axis.equipment']
_category_construct.new_ids [axis_id]

save_


save__detector_axis.axis_id

_definition.id                          '_detector_axis.axis_id'
_name.object_id                         axis_id
_name.category_id                       detector_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__detector_axis.vector

_definition.id                          '_detector_axis.vector'
_name.object_id                         vector
_name.category_id                       detector_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__detector_axis.vector_convention2

_definition.id                          '_detector_axis.vector_convention2'
_name.object_id                         vector_convention2
_name.category_id                       detector_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save_DIFFRN_DATA_FRAME

_definition.id                          DIFFRN_DATA_FRAME
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
    Data items in the DIFFRN_DATA_FRAME category record
    the details about each frame of data.
    The items in this category were previously in a
    DIFFRN_FRAME_DATA category, which is now deprecated.
    The items from the old category are provided
    as aliases but should not be used for new work.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_DATA_FRAME
_category.key_id                        '_diffrn_data_frame.key'
_category.key_list ['_diffrn_data_frame.id'  
                   '_diffrn_data_frame.detector_element_id'  
                   '_diffrn_data_frame.scan_id']
_name.linked_item_id                    ''

save_


save__diffrn_data_frame.array_id

_definition.id                          '_diffrn_data_frame.array_id'
loop_
  _alias.definition_id
         '_diffrn_frame_data.array_id' 
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure.id in the
    ARRAY_STRUCTURE category.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         array_id
_name.linked_item_id                    '_array_structure.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_data_frame.array_section_id

_definition.id                          '_diffrn_data_frame.array_section_id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_structure_list_section.id
    in the ARRAY_STRUCTURE_LIST_SECTION category.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         array_section_id
_name.linked_item_id                    '_array_structure_list_section.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_data_frame.binary_id

_definition.id                          '_diffrn_data_frame.binary_id'
loop_
  _alias.definition_id
         '_diffrn_frame_data.binary_id' 
_definition.update                      2014-07-07
_description.text                       
;
    This item is a pointer to _array_data.binary_id in the
    ARRAY_DATA category.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         binary_id
_name.linked_item_id                    '_array_data.binary_id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_data_frame.center_fast

_definition.id                          '_diffrn_data_frame.center_fast'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_data_frame.center_fast is
    the fast index axis beam center position relative to the detector
    element face in the units specified in the data item
    '_diffrn_data_frame.center_units' along the fast
    axis of the detector from the center of the first pixel to
    the point at which the Z-axis (which should be colinear with the
    beam) intersects the face of the detector, if in fact is does.
    At the time of the measurement the current setting of detector
    positioner given frame are used.
    It is important to note that for measurements in millimetres,
    the sense of the axis is used, rather than the sign of the
    pixel-to-pixel increments.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         center_fast
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_data_frame.center_slow

_definition.id                          '_diffrn_data_frame.center_slow'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_data_frame.center_slow is
    the slow index axis beam center position relative to the detector
    element face in the units specified in the data item
    '_diffrn_data_frame.center_units' along the slow
    axis of the detector from the center of the first pixel to
    the point at which the Z-axis (which should be colinear with the
    beam) intersects the face of the detector, if in fact is does.
    At the time of the measurement the current setting of detector
    positioner given frame are used.
    It is important to note that the sense of the axis is used,
    rather than the sign of the pixel-to-pixel increments.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         center_slow
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_data_frame.center_units

_definition.id                          '_diffrn_data_frame.center_units'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_data_frame.center_units specifies the 
    units in which the values of '_diffrn_data_frame.center_fast' and
    '_diffrn_data_frame.center_slow' are presented.  The default is 
    'mm' for millimetres.  The alternatives are 'pixels' and 'bins'.  
    In all cases the center distances are measured from the center 
    of the first pixel, i.e. in a 2x2 binning, the measuring origin
    is offset from the centers of the bins by one half pixel
    towards the first pixel.
    If 'bins' is specified, the data in
        '_array_intensities.pixel_fast_bin_size',
        '_array_intensities.pixel_slow_bin_size', and
        '_array_intensities.pixel_binning_method'
    is used to define the binning scheme.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         center_units
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         mm        millimetres         
         pixels    'detector pixels'   
         bins      'detector bins' 

save_


save__diffrn_data_frame.details

_definition.id                          '_diffrn_data_frame.details'
loop_
  _alias.definition_id
         '_diffrn_frame_data.details' 
_definition.update                      2014-07-07
_description.text                       
;
     The value of _diffrn_data_frame.details should give a
     description of special aspects of each frame of data.
     This is an appropriate location in which to record
     information from vendor headers as presented in those
     headers, but it should never be used as a substitute
     for providing the fully parsed information within
     the appropriate imgCIF/CBF categories.
     Normally, when a conversion from a miniCBF has been done
     the data from '_array_data.header_convention'
     should be transferred to this data item and
     '_array_data.header_convention'
     should be removed.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         details
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text
loop_
  _description_example.case
         
;
                        HEADER_BYTES = 512;
                        DIM = 2;
                        BYTE_ORDER = big_endian;
                        TYPE = unsigned_short;
                        SIZE1 = 3072;
                        SIZE2 = 3072;
                        PIXEL_SIZE = 0.102588;
                        BIN = 2x2;
                        DETECTOR_SN = 901;
                        TIME = 29.945155;
                        DISTANCE = 200.000000;
                        PHI = 85.000000;
                        OSC_START = 85.000000;
                        OSC_RANGE = 1.000000;
                        WAVELENGTH = 0.979381;
                        BEAM_CENTER_X = 157.500000;
                        BEAM_CENTER_Y = 157.500000;
                        PIXEL SIZE = 0.102588;
                        OSCILLATION RANGE = 1;
                        EXPOSURE TIME = 29.9452;
                        TWO THETA = 0;
                        BEAM CENTRE = 157.5 157.5;
;        
         
;         Example of header information extracted from an ADSC Quantum
          315 detector header by CBFlib_0.7.6.  Image provided by Chris
          Nielsen of ADSC from a data collection at SSRL beamline 1-5.
; 

save_


save__diffrn_data_frame.detector_element_id

_definition.id                          '_diffrn_data_frame.detector_element_id'
loop_
  _alias.definition_id
         '_diffrn_frame_data.detector_element_id' 
_definition.update                      2014-07-07
_description.text                       
;
     This item is a pointer to _diffrn_detector_element.id
     in the DIFFRN_DETECTOR_ELEMENT category.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         detector_element_id
_name.linked_item_id                    '_diffrn_detector_element.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_category_construct.components          ''
_category_construct.new_ids             ''

save_


save__diffrn_data_frame.detector_element_key

_definition.id                          '_diffrn_data_frame.detector_element_key'
_name.object_id                         detector_element_key
_name.category_id                       diffrn_data_frame
_definition.class                       Datum
_description.text                       'A pointer to the key of the diffrn_detector_element category'
_name.linked_item_id                    '_diffrn_detector_element.key'
_type.purpose                           Link
_type.source                            Related
_type.container                         Multiple
_type.contents                          Code
_category_construct.components          ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_diffrn_data_frame.detector_element_key = [_diffrn_data_frame.detector_element_id,_diffrn_data_frame.detector_id]

; 

save_


save__diffrn_data_frame.detector_id

_definition.id                          '_diffrn_data_frame.detector_id'
_name.object_id                         detector_id
_name.category_id                       diffrn_data_frame
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_name.linked_item_id                    '_diffrn_detector.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_data_frame.id

_definition.id                          '_diffrn_data_frame.id'
loop_
  _alias.definition_id
         '_diffrn_frame_data.id' 
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_data_frame.id must uniquely identify
    each complete frame of data within a particular scan.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         id
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
_category_construct.new_ids             ''

save_


save__diffrn_data_frame.key

_definition.id                          '_diffrn_data_frame.key'
_definition.update                      2015-11-12
_description.text                       
;
    This item is a unique identifier for items in the DIFFRN
    DATA FRAME category
;
_name.category_id                       diffrn_data_frame
_name.object_id                         key
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Multiple
_type.contents                          Code
_name.linked_item_id                    ''
_category_construct.new_ids             ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with ddf as diffrn_data_frame {
  ddf.key = [ddf.scan_id,ddf.id]
  }

; 

save_


save__diffrn_data_frame.scan_id

_definition.id                          '_diffrn_data_frame.scan_id'
_definition.update                      2015-11-12
_description.text                       
;
    This item is a pointer to _diffrn_scan.id in the
    DIFFRN_SCAN category.
;
_name.category_id                       diffrn_data_frame
_name.object_id                         scan_id
_name.linked_item_id                    '_diffrn_scan.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_DIFFRN_DETECTOR

_definition.id                          DIFFRN_DETECTOR
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_DETECTOR category describe the
     detector used to measure the scattered radiation, including
     any analyser and post-sample collimation.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_DETECTOR
_category.key_id                        '_diffrn_detector.id'
_category.key_list ['_diffrn_detector.diffrn_id'  '_diffrn_detector.id']
_category_construct.components          ''
loop_
  _category_key.name
         '_diffrn_detector.id' 

save_


save__diffrn_detector.detector

_definition.id                          '_diffrn_detector.detector'
loop_
  _alias.definition_id
         '_diffrn_detector.description'          
         '_diffrn_radiation_detector'  
         '_diffrn_detector' 
_definition.update                      2015-11-05
_description.text                       
;
     Description of the type of diffraction radiation detector.
;
_name.category_id                       diffrn_detector
_name.object_id                         description
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text
loop_
  _description_example.case
         'photographic film'           
         'scintillation counter'       
         'CCD plate'         
         'BF~3~ counter' 

save_


save__diffrn_detector.diffrn_id

_definition.id                          '_diffrn_detector.diffrn_id'
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _diffrn.id in the DIFFRN
     category.  The value of _diffrn.id uniquely defines a set of
     diffraction data.
;
_name.category_id                       diffrn_detector
_name.object_id                         diffrn_id
_name.linked_item_id                    '_diffrn.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_category_construct.components          ''

save_


save__diffrn_detector.gain_setting

_definition.id                          '_diffrn_detector.gain_setting'
_definition.update                      2014-07-07
_description.text                       
;
     The gain setting for detector.   This is a text string usually
     reflecting a detector setting that may have a simple or very
     complex relationship with the value of _array_intensities.gain
     and should not be used directly for computations without
     further information.
     This tag is provided for completeness in recording the settings
     of an experiment using a dector with a panel-switch, jumper
     or control command that allows a choice of gain settings.
;
_name.category_id                       diffrn_detector
_name.object_id                         gain_setting
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text

save_


save__diffrn_detector.id

_definition.id                          '_diffrn_detector.id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _diffrn_detector.id must uniquely identify
     each detector used to collect each diffraction data set.
     If the value of _diffrn_detector.id is not given, it is
     implicitly equal to the value of _diffrn_detector.diffrn_id.
;
_name.category_id                       diffrn_detector
_name.object_id                         id
_name.linked_item_id                    '_diffrn_detector.diffrn_id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_category_construct.components          ''

save_


save__diffrn_detector.layer_thickness

_definition.id                          '_diffrn_detector.layer_thickness'
_definition.update                      2014-07-07
_description.text                       
;
   The thickness in mm of the sensing layer of the detector
       for use in angular corrections.
;
_name.category_id                       diffrn_detector
_name.object_id                         layer_thickness
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             millimetres

save_


save__diffrn_detector.number_of_axes

_definition.id                          '_diffrn_detector.number_of_axes'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _diffrn_detector.number_of_axes gives the
     number of axes of the positioner for the detector identified
     by _diffrn_detector.id.  The word 'positioner' is a general term 
     used in instrumentation design for devices that are used to 
     change the positions of portions of apparatus by linear
     translation, rotation or combinations of such motions.
     Axes which are used to provide a coordinate system for the
     face of an area detetctor should not be counted for this
     data item.
     The description of each axis should be provided by entries
     in DIFFRN_DETECTOR_AXIS.
;
_name.category_id                       diffrn_detector
_name.object_id                         number_of_axes
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Integer
_category_construct.components          ''

save_


save__diffrn_detector.number_of_elements

_definition.id                          '_diffrn_detector.number_of_elements'
_name.object_id                         number_of_elements
_name.category_id                       diffrn_detector
_definition.class                       Datum
_description.text 
                                        'The number of elements a single frame from this detector is composed from.'
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Single
_type.contents                          Integer
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with dd as diffrn_detector {
el_count = 0
loop dde as diffrn_detector_element {
      if (dde.detector_id == dd.id) {
          el_count = el_count + 1	
     }
}
dd.number_of_elements = el_count
}

; 

save_


save__diffrn_detector.type

_definition.id                          '_diffrn_detector.type'
loop_
  _alias.definition_id
         '_diffrn_detector.make'       
         '_diffrn_detector_type' 
_definition.update                      2015-11-05
_description.text                       
;
     The make, model or name of the diffraction radiation detector.
;
_name.category_id                       diffrn_detector
_name.object_id                         make
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text

save_


save_DIFFRN_DETECTOR_AXIS

_definition.id                          DIFFRN_DETECTOR_AXIS
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_DETECTOR_AXIS category associate
     axes with detectors.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_DETECTOR_AXIS
_category.key_id                        '_diffrn_detector_axis.id'
_category.key_list ['_diffrn_detector_axis.detector_id'  
                   '_diffrn_detector_axis.axis_id']

save_


save__diffrn_detector_axis.axis_id

_definition.id                          '_diffrn_detector_axis.axis_id'
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _axis.id in the AXIS category.
;
_name.category_id                       diffrn_detector_axis
_name.object_id                         axis_id
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_detector_axis.detector_id

_definition.id                          '_diffrn_detector_axis.detector_id'
loop_
  _alias.definition_id
         '_diffrn_detector_axis.id' 
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _diffrn_detector.id in
     the DIFFRN_DETECTOR category.
     This item was previously named _diffrn_detector_axis.id
     which is now a deprecated name.  The old name is
     provided as an alias but should not be used for new work.
;
_name.category_id                       diffrn_detector_axis
_name.object_id                         detector_id
_name.linked_item_id                    '_diffrn_detector.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_DIFFRN_DETECTOR_ELEMENT

_definition.id                          DIFFRN_DETECTOR_ELEMENT
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
    Data items in the DIFFRN_DETECTOR_ELEMENT category record
    the details about spatial layout and other characteristics
    of each element of a detector which may have multiple elements.
    In most cases, giving more detailed information
    in ARRAY_STRUCTURE_LIST and ARRAY_STRUCTURE_LIST_AXIS
    is preferable to simply providing the centre of the
    detector element.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_DETECTOR_ELEMENT
_category.key_id                        '_diffrn_detector_element.key'
_category.key_list ['_diffrn_detector_element.id'  
                   '_diffrn_detector_element.detector_id']

save_


save__diffrn_detector_element.detector_id

_definition.id                          '_diffrn_detector_element.detector_id'
_definition.update                      2014-07-07
_description.text                       
;
     A pointer to _diffrn_detector.id in the DIFFRN_DETECTOR category.
;
_name.category_id                       diffrn_detector_element
_name.object_id                         detector_id
_name.linked_item_id                    '_diffrn_detector.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_detector_element.id

_definition.id                          '_diffrn_detector_element.id'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_detector_element.id must uniquely
    identify each element of a detector.
;
_name.category_id                       diffrn_detector_element
_name.object_id                         id
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_detector_element.key

_definition.id                          '_diffrn_detector_element.key'
_name.object_id                         key
_name.category_id                       diffrn_detector_element
_definition.class                       Datum
_description.text                       'This item references a unique entry for the detector element'
_type.purpose                           Key
_type.source                            Derived
_type.container                         Multiple
_type.contents                          Text
_category_construct.new_ids             ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_diffrn_detector_element.key = [_diffrn_detector_element.id,_diffrn_detector_element.detector_id]

; 

save_


save__diffrn_detector_element.reference_center_fast

_definition.id                          '_diffrn_detector_element.reference_center_fast'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_detector_element.reference_center_fast is
    the fast index axis beam center position relative to the detector
    element face in the units specified in the data item
    '_diffrn_detector_element.reference_center_units' along the fast
    axis of the detector from the center of the first pixel to
    the point at which the Z-axis (which should be colinear with the
    beam) intersects the face of the detector, if in fact is does.
    At the time of the measurement all settings of the detector
    positioner should be at their reference settings.  If more than
    one reference setting has been used the value given whould be
    representive of the beam center as determined from the ensemble
    of settings.
    It is important to note that for measurements in millimetres,
    the sense of the axis is used, rather than the sign of the
    pixel-to-pixel increments.
;
_name.category_id                       diffrn_detector_element
_name.object_id                         reference_center_fast
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_detector_element.reference_center_slow

_definition.id                          '_diffrn_detector_element.reference_center_slow'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_detector_element.reference_center_slow is
    the slow index axis beam center position relative to the detector
    element face in the units specified in the data item
    '_diffrn_detector_element.reference_center_units' along the slow
    axis of the detector from the center of the first pixel to
    the point at which the Z-axis (which should be colinear with the
    beam) intersects the face of the detector, if in fact is does.
    At the time of the measurement all settings of the detector
    positioner should be at their reference settings.  If more than
    one reference setting has been used the value givien whould be
    representive of the beam center as determined from the ensemble
    of settings.
    It is important to note that the sense of the axis is used,
    rather than the sign of the pixel-to-pixel increments.
;
_name.category_id                       diffrn_detector_element
_name.object_id                         reference_center_slow
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_detector_element.reference_center_units

_definition.id                          '_diffrn_detector_element.reference_center_units'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_detector_element.reference_center_units
    specifies the units in which the values of
    '_diffrn_detector_element.reference_center_fast' and
    '_diffrn_detector_element.reference_center_slow'
    are presented.  The default is 'mm' for millimetres.  The
    alternatives are 'pixels' and 'bins'.  In all cases the
    center distances are measured from the center of the
    first pixel, i.e. in a 2x2 binning, the measuring origin
    is offset from the centers of the bins by one half pixel
    towards the first pixel.
    If 'bins' is specified, the data in
        '_array_intensities.pixel_fast_bin_size',
        '_array_intensities.pixel_slow_bin_size', and
        '_array_intensities.pixel_binning_method'
    is used to define the binning scheme.
;
_name.category_id                       diffrn_detector_element
_name.object_id                         reference_center_units
_type.purpose                           State
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _enumeration_set.state
  _enumeration_set.detail
         mm        millimetres         
         pixels    'detector pixels'   
         bins      'detector bins' 

save_


save_diffrn_detector_monolithic

_name.object_id                         diffrn_detector_monolithic
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          diffrn_detector_monolithic
_definition.scope                       Category
_definition.class                       Loop
_description.text                       'A detector consisting of a single element'
_category.key_id                        '_diffrn_detector_monolithic.id'
loop_
  _category_key.name
         '_diffrn_detector_monolithic.id' 
_name.linked_item_id                    ''
_category_construct.type                Filter
_category_construct.components ['_diffrn_detector.number_of_elements']
_category_construct.filter [1]
_category_construct.new_ids [id]
_category_construct.integer_filter [1]

save_


save__diffrn_detector_monolithic.id

_definition.id                          '_diffrn_detector_monolithic.id'
_name.object_id                         id
_name.category_id                       diffrn_detector_monolithic
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Key
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    '_diffrn_detector.id'

save_


save_diffrn_detector_monolithic_element

_name.object_id                         diffrn_detector_monolithic_element
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          diffrn_detector_monolithic_element
_definition.scope                       Category
_definition.class                       Loop
_description.text                       'No definition provided'
_category_construct.components ['_diffrn_detector_element.detector_id'  
                               '_diffrn_detector_monolithic.id']
_category_construct.type                Pullback
_category_construct.new_ids [key  detector_id]
_category.key_id                        '_diffrn_detector_monolithic_element.key'
_name.linked_item_id                    ''
_category_construct.filter              ''

save_


save__diffrn_detector_monolithic_element.detector_id

_definition.id                          '_diffrn_detector_monolithic_element.detector_id'
_name.object_id                         detector_id
_name.category_id                       diffrn_detector_monolithic_element
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_category_construct.new_ids             ''
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    ''

save_


save__diffrn_detector_monolithic_element.id

_definition.id                          '_diffrn_detector_monolithic_element.id'
_name.object_id                         id
_name.category_id                       diffrn_detector_monolithic_element
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_category_construct.components          ''
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_name.linked_item_id                    '_diffrn_detector_element.id'

save_


save__diffrn_detector_monolithic_element.key

_definition.id                          '_diffrn_detector_monolithic_element.key'
_name.object_id                         key
_name.category_id                       diffrn_detector_monolithic_element
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Key
_type.source                            Derived
_type.container                         Multiple
_type.contents                          Code
_name.linked_item_id                    ''
_category_construct.new_ids             ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_diffrn_detector_monolithic_element.key = [_diffrn_detector_monolithic_element.id,_diffrn_detector_monolithic_element.detector_id]

; 

save_


save_DIFFRN_MEASUREMENT

_definition.id                          DIFFRN_MEASUREMENT
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_MEASUREMENT category record details
     about the device used to orient and/or position the crystal
     during data measurement and the manner in which the
     diffraction data were measured.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_MEASUREMENT
_category.key_id                        '_diffrn_measurement.key'
_category.key_list ['_diffrn_measurement.device'  
                   '_diffrn_measurement.diffrn_id'  '_diffrn_measurement.id']

save_


save__diffrn_measurement.device

_definition.id                          '_diffrn_measurement.device'
loop_
  _alias.definition_id
         '_diffrn_measurement.device_class'      
         '_diffrn_measurement_device'  
         '_diffrn.measurement_device_class' 
_definition.update                      2015-11-05
_description.text                       
;
     Type of goniometer device used to mount and orient the specimen.
;
_name.category_id                       diffrn_measurement
_name.object_id                         device_class
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text
loop_
  _description_example.case
         'three-circle diffractometer'           
         'four-circle diffractometer'  
         '\k-geometry diffractometer'  
         'oscillation camera'          
         'precession camera' 

save_


save__diffrn_measurement.device_type

_definition.id                          '_diffrn_measurement.device_type'
loop_
  _alias.definition_id
         '_diffrn_measurement.device_make'       
         '_diffrn_measurement_device_type'       
         '_diffrn.measurement_device_make' 
_definition.update                      2015-11-05
_description.text                       
;
     The make, model or name of the goniometer device used.
;
_name.category_id                       diffrn_measurement
_name.object_id                         device_make
_type.purpose                           Describe
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text
loop_
  _description_example.case
         'Supper model q'    
         'Huber model r'     
         'Enraf-Nonius model s'        
         home-made 

save_


save__diffrn_measurement.diffrn_id

_definition.id                          '_diffrn_measurement.diffrn_id'
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _diffrn.id in the DIFFRN category.
;
_name.category_id                       diffrn_measurement
_name.object_id                         diffrn_id
_name.linked_item_id                    '_diffrn.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_measurement.id

_definition.id                          '_diffrn_measurement.id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _diffrn_measurement.id must uniquely identify
     the set of mechanical characteristics of the device used to
     orient and/or position the sample used during the collection
     of each diffraction data set.
     If the value of _diffrn_measurement.id is not given, it is
     implicitly equal to the value of _diffrn_measurement.diffrn_id.
     Either _diffrn_measurement.device or _diffrn_measurement.id 
     may be used to link to other categories.  If the experimental 
     setup admits multiple devices, then _diffrn_measurement.id is 
     used to provide a unique link.
;
_name.category_id                       diffrn_measurement
_name.object_id                         id
_name.linked_item_id                    '_diffrn_measurement.diffrn_id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_measurement.number_of_axes

_definition.id                          '_diffrn_measurement.number_of_axes'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _diffrn_measurement.number_of_axes gives the
     number of axes of the positioner for the goniometer or
     other sample orientation or positioning device identified
     by _diffrn_measurement.id.  The description of the axes 
     should be provided by entries in DIFFRN_MEASUREMENT_AXIS.
;
_name.category_id                       diffrn_measurement
_name.object_id                         number_of_axes
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Count

save_


save__diffrn_measurement.sample_detector_distance

_definition.id                          '_diffrn_measurement.sample_detector_distance'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _diffrn_measurement.sample_detector_distance gives
     the unsigned distance in millimetres from the sample to the
     detector along the beam.
;
_name.category_id                       diffrn_measurement
_name.object_id                         sample_detector_distance
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             millimetres

save_


save__diffrn_measurement.sample_detector_voffset

_definition.id                          '_diffrn_measurement.sample_detector_voffset'
_definition.update                      2014-07-07
_description.text                       
;
     The value of _diffrn_measurement.sample_detector_voffset gives
     the signed distance in millimetres in the vertical
     direction (positive for up) from the center of
     the beam to the center of the detector.
;
_name.category_id                       diffrn_measurement
_name.object_id                         sample_detector_voffset
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             millimetres

save_


save_DIFFRN_MEASUREMENT_AXIS

_definition.id                          DIFFRN_MEASUREMENT_AXIS
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_MEASUREMENT_AXIS category associate
     axes with goniometers.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_MEASUREMENT_AXIS
_category.key_id                        '_diffrn_measurement_axis.key'
_category.key_list ['_diffrn_measurement_axis.measurement_device'  
                   '_diffrn_measurement_axis.measurement_id'  
                   '_diffrn_measurement_axis.axis_id']

save_


save__diffrn_measurement_axis.axis_id

_definition.id                          '_diffrn_measurement_axis.axis_id'
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _axis.id in the AXIS category.
;
_name.category_id                       diffrn_measurement_axis
_name.object_id                         axis_id
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_measurement_axis.measurement_device

_definition.id                          '_diffrn_measurement_axis.measurement_device'
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _diffrn_measurement.device
     in the DIFFRN_MEASUREMENT category.
;
_name.category_id                       diffrn_measurement_axis
_name.object_id                         measurement_device
_name.linked_item_id                    '_diffrn_measurement.device'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_measurement_axis.measurement_id

_definition.id                          '_diffrn_measurement_axis.measurement_id'
loop_
  _alias.definition_id
         '_diffrn_measurement_axis.id' 
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _diffrn_measurement.id in
     the DIFFRN_MEASUREMENT category.
     This item was previously named _diffrn_measurement_axis.id,
     which is now a deprecated name.  The old name is
     provided as an alias but should not be used for new work.
;
_name.category_id                       diffrn_measurement_axis
_name.object_id                         measurement_id
_name.linked_item_id                    '_diffrn_measurement.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_DIFFRN_RADIATION

_definition.id                          DIFFRN_RADIATION
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_RADIATION category describe
     the radiation used for measuring diffraction intensities,
     its collimation and monochromatization before the sample.

     Post-sample treatment of the beam is described by data
     items in the DIFFRN_DETECTOR category.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_RADIATION
_category.key_id                        '_diffrn_radiation.diffrn_id'
_category.key_list ['_diffrn_radiation.diffrn_id']

save_


save__diffrn_radiation.diffrn_id

_definition.id                          '_diffrn_radiation.diffrn_id'
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _diffrn.id in the DIFFRN category.
;
_name.category_id                       diffrn_radiation
_name.object_id                         diffrn_id
_name.linked_item_id                    '_diffrn.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_radiation.div_x_source

_definition.id                          '_diffrn_radiation.div_x_source'
_definition.update                      2014-07-07
_description.text                       
;
     Beam crossfire in degrees parallel to the laboratory X axis
     (see AXIS category).
     This is a characteristic of the X-ray beam as it illuminates
     the sample (or specimen) after all monochromation and
     collimation.
     This is the standard uncertainty (e.s.d.)  of the directions of
     photons in the XZ plane around the mean source beam
     direction.
     Note that for some synchrotrons this value is specified
     in milliradians, in which case a conversion is needed.
     To convert a value in milliradians to a value in degrees,
     multiply by 0.180 and divide by \p.
;
_name.category_id                       diffrn_radiation
_name.object_id                         div_x_source
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             degrees

save_


save__diffrn_radiation.div_x_y_source

_definition.id                          '_diffrn_radiation.div_x_y_source'
_definition.update                      2014-07-07
_description.text                       
;
     Beam crossfire correlation degrees^2^ between the
     crossfire laboratory X-axis component and the crossfire
     laboratory Y-axis component (see AXIS category).
     This is a characteristic of the X-ray beam as it illuminates
     the sample (or specimen) after all monochromation and
     collimation.
     This is the mean of the products of the deviations of the
     direction of each photon in XZ plane times the deviations
     of the direction of the same photon in the YZ plane
     around the mean source beam direction.  This will be zero
     for uncorrelated crossfire.
     Note that some synchrotrons, this value is specified in
     milliradians^2^, in which case a conversion would be needed.
     To go from a value in milliradians^2^ to a value in
     degrees^2^, multiply by 0.180^2^ and divide by \p^2^.
;
_name.category_id                       diffrn_radiation
_name.object_id                         div_x_y_source
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees_squared

save_


save__diffrn_radiation.div_y_source

_definition.id                          '_diffrn_radiation.div_y_source'
_definition.update                      2014-07-07
_description.text                       
;
     Beam crossfire in degrees parallel to the laboratory Y axis
     (see AXIS category).
     This is a characteristic of the X-ray beam as it illuminates
     the sample (or specimen) after all monochromation and
     collimation.
     This is the standard uncertainty (e.s.d.) of the directions
     of photons in the YZ plane around the mean source beam
     direction.
     Note that for some synchrotrons this value is specified
     in milliradians, in which case a conversion is needed.
     To convert a value in milliradians to a value in degrees,
     multiply by 0.180 and divide by \p.
;
_name.category_id                       diffrn_radiation
_name.object_id                         div_y_source
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_radiation.polarisn_norm_esd

_definition.id                          '_diffrn_radiation.polarisn_norm_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarisn_norm_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd) of _diffrn_radiation.polarisn_norm,
     the angle in degrees, as viewed from the specimen, between the
     perpendicular component of the polarization and the diffraction
     plane. See _diffrn_radiation_polarisn_ratio.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarisn_norm_su
_name.linked_item_id                    '_diffrn_radiation.polarisn_norm'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real
_units.code                             degrees

save_


save__diffrn_radiation.polarisn_ratio_esd

_definition.id                          '_diffrn_radiation.polarisn_ratio_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarisn_ratio_su'   
         '_diffrn_radiation_polarisn_ratio_esd' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd) of _diffrn_radiation.polarisn_ratio,
     the polarization ratio of the diffraction beam incident on the crystal.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarisn_ratio_esd
_name.linked_item_id                    '_diffrn_radiation.polarisn_ratio'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_source_norm

_definition.id                          '_diffrn_radiation.polarizn_source_norm'
_definition.update                      2014-07-07
_description.text                       
;
     The angle in degrees, as viewed from the specimen, between
     the normal to the polarization plane and the laboratory Y
     axis as defined in the AXIS category.
     Note that this is the angle of polarization of the source
     photons, either directly from a synchrotron beamline or
     from a monochromater.  This differs from the value of
     _diffrn_radiation.polarisn_norm
     in that _diffrn_radiation.polarisn_norm refers to
     polarization relative to the diffraction plane rather than
     to the laboratory axis system.
     In the case of an unpolarized beam, or a beam with true
     circular polarization, in which no single plane of
     polarization can be determined, the plane should be taken
     as the XZ plane and the angle as 0.
     See _diffrn_radiation.polarizn_source_ratio.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_source_norm
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_radiation.polarizn_source_norm_esd

_definition.id                          '_diffrn_radiation.polarizn_source_norm_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarizn_source_norm_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd) of _diffrn_radiation.polarizn_source_norm,
     the angle in degrees, as viewed from the specimen, between
     the normal to the polarization plane and the laboratory Y
     axis as defined in the AXIS category.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_source_norm_su
_name.linked_item_id                    '_diffrn_radiation.polarizn_source_norm'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real
_units.code                             degrees

save_


save__diffrn_radiation.polarizn_source_ratio

_definition.id                          '_diffrn_radiation.polarizn_source_ratio'
_definition.update                      2014-07-07
_description.text                       
;
     (Ip-In)/(Ip+In), where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization and In is the intensity (amplitude squared)
     of the electric vector in the plane of the normal to the
     plane of polarization.
     In the case of an unpolarized beam, or a beam with true
     circular polarization, in which no single plane of
     polarization can be determined, the plane is to be taken
     as the XZ plane and the normal is parallel to the Y axis.
     Thus, if there was complete polarization in the plane of
     polarization, the value of
     _diffrn_radiation.polarizn_source_ratio would be 1, and
     for an unpolarized beam
     _diffrn_radiation.polarizn_source_ratio would have a
     value of 0.
     If the X axis has been chosen to lie in the plane of
     polarization, this definition will agree with the definition
     of 'MONOCHROMATOR' in the Denzo glossary, and values of near
     1 should be expected for a bending-magnet source.  However,
     if the X axis were perpendicular to the polarization plane
     (not a common choice), then the Denzo value would be the
     negative of _diffrn_radiation.polarizn_source_ratio.
     See http://www.hkl-xray.com for information on Denzo and
     Otwinowski & Minor (1997).
     This differs both in the choice of ratio and choice of
     orientation from _diffrn_radiation.polarisn_ratio, which,
     unlike _diffrn_radiation.polarizn_source_ratio, is
     unbounded.
     Reference: Otwinowski, Z. & Minor, W. (1997). 'Processing of
     X-ray diffraction data collected in oscillation mode.' Methods
     Enzymol. 276, 307-326.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_source_ratio
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_source_ratio_esd

_definition.id                          '_diffrn_radiation.polarizn_source_ratio_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarizn_source_ratio_su' 
_definition.update                      2014-07-30
_description.text                       
;
     Standard uncertainty (esd)of _diffrn_radiation.polarizn_source_ratio,
      (Ip-In)/(Ip+In), where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization and In is the intensity (amplitude squared)
     of the electric vector in the plane of the normal to the
     plane of polarization.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_source_ratio_su
_name.linked_item_id                    '_diffrn_radiation.polarizn_source_ratio'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_Stokes_I

_definition.id                          '_diffrn_radiation.polarizn_Stokes_I'
_definition.update                      2014-07-07
_description.text                       
;
     Ip+In+Inp, where where Ip is the intensity (amplitude squared)
     of the electric vector in the plane of polarization,
     In is the intensity (amplitude squared) of the electric vector
     in the plane of the normal to the plane of polarization,
     and Inp is the intensity (amplitude squared) of the non-
     polarized (incoherent) electric vector.
     This is an average or other representative sample of the scan.
     This is the first of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
     Note that, if the polarized intensity Ip+In is required,
     (Ip+In)^2 is the sum of Q^2+U^2+V^2.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_I
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    1.0

save_


save__diffrn_radiation.polarizn_Stokes_I_esd

_definition.id                          '_diffrn_radiation.polarizn_Stokes_I_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarizn_Stokes_I_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd)i of _diffrn_radiation.polarizn_Stokes_I,
     Ip+In+Inp, where where Ip is the intensity (amplitude squared)
     of the electric vector in the plane of polarization,
     In is the intensity (amplitude squared) of the electric vector
     in the plane of the normal to the plane of polarization,
     and Inp is the intensity (amplitude squared) of the non-
     polarized (incoherent) electric vector.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_I_su
_name.linked_item_id                    '_diffrn_radiation.polarizn_Stokes_I'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_Stokes_Q

_definition.id                          '_diffrn_radiation.polarizn_Stokes_Q'
_definition.update                      2014-07-07
_description.text                       
;
     (Ip-In)*cos(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
     This is an average or other representative sample of the scan.
     This is the second of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_Q
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_Stokes_Q_esd

_definition.id                          '_diffrn_radiation.polarizn_Stokes_Q_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarizn_Stokes_Q_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd) of _diffrn_radiation.polarizn_Stokes_Q,
     (Ip-In)*cos(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_Q_su
_name.linked_item_id                    '_diffrn_radiation.polarizn_Stokes_Q'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_Stokes_U

_definition.id                          '_diffrn_radiation.polarizn_Stokes_U'
_definition.update                      2014-07-07
_description.text                       
;
     (Ip-In)*sin(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
     This is an average or other representative sample of the scan.  
     This is the third of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_U
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_Stokes_U_esd

_definition.id                          '_diffrn_radiation.polarizn_Stokes_U_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarizn_Stokes_U_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd) _diffrn_radiation.polarizn_Stokes_U,
     (Ip-In)*sin(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_U_su
_name.linked_item_id                    '_diffrn_radiation.polarizn_Stokes_U'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_Stokes_V

_definition.id                          '_diffrn_radiation.polarizn_Stokes_V'
_definition.update                      2014-07-07
_description.text                       
;
     +/-2*sqrt(IpIn), with a + sign for right-handed circular
     polarization, where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization and In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
     This is an average or other representative sample of the scan.
     This is the fourth of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_V
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_radiation.polarizn_Stokes_V_esd

_definition.id                          '_diffrn_radiation.polarizn_Stokes_V_esd'
loop_
  _alias.definition_id
         '_diffrn_radiation.polarizn_Stokes_V_su' 
_definition.update                      2014-07-30
_description.text                       
;
     Standard uncertainty (esd) _diffrn_radiation.polarizn_Stokes_V,
     +/-2*sqrt(IpIn), with a + sign for right-handed circular
     polarization, where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization and In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
;
_name.category_id                       diffrn_radiation
_name.object_id                         polarizn_Stokes_V_su
_name.linked_item_id                    '_diffrn_radiation.polarizn_Stokes_V'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save_DIFFRN_RADIATION_WAVELENGTH

_definition.id                          DIFFRN_RADIATION_WAVELENGTH
_definition.scope                       Category
_definition.class                       Loop
_description.text                       
;
        This category describes the wavelengths that are incident on
        the sample
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_RADIATION_WAVELENGTH
_category.key_id                        '_diffrn_radiation_wavelength.id'

save_


save__diffrn_radiation_wavelength.id

_description.text                       
;              The code identifying each value of
               _diffrn_radiation_wavelength.wavelength.
               Items in the DIFFRN_RADIATION_WAVELENGTH category are looped
               when multiple wavelengths are used.

               This code is used to link with the DIFFRN_REFLN category.
               The _diffrn_refln.wavelength_id codes must match one of
               the codes defined in this category.
;
_definition.id                          '_diffrn_radiation_wavelength.id'
_name.category_id                       diffrn_radiation_wavelength
_name.object_id                         id
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_radiation_wavelength.wavelength

_description.text                       '              The radiation wavelength in angstroms.'
_definition.id                          '_diffrn_radiation_wavelength.wavelength'
_name.category_id                       diffrn_radiation_wavelength
_name.object_id                         wavelength
_type.contents                          Real
_type.container                         Single

save_


save__diffrn_radiation_wavelength.wt

_description.text                       
;              The relative weight of a wavelength identified by the code
               _diffrn_radiation_wavelength.id in the list of wavelengths.
;
_definition.id                          '_diffrn_radiation_wavelength.wt'
_name.category_id                       diffrn_radiation_wavelength
_name.object_id                         wt
_type.contents                          Real
_type.container                         Single

save_


save_DIFFRN_REFLN

_definition.id                          DIFFRN_REFLN
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     This category redefinition has been added to extend the key of
     the standard DIFFRN_REFLN category.
     Data items in the DIFFRN_REFLN category record details about
     the intensities in the diffraction data set
     identified by _diffrn_refln.diffrn_id.
     The DIFFRN_REFLN data items refer to individual intensity
     measurements and must be included in looped lists.
     The DIFFRN_REFLNS data items specify the parameters that apply
     to all intensity  measurements in the particular diffraction
     data set identified by _diffrn_reflns.diffrn_id and
     _diffrn_refln.frame_id
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_REFLN
_category.key_id                        '_diffrn_refln.key'
_category.key_list ['_diffrn_refln.diffrn_id'  '_diffrn_refln.id'  
                   '_diffrn_refln.frame_id']

save_


save__diffrn_refln.diffrn_id

_definition.id                          '_diffrn_refln.diffrn_id'
_definition.update                      2014-07-07
_description.text                       
;
     This item is a placeholder for the definition in the 
     PDBx/mmCIF dictionary.
;
_name.category_id                       diffrn_refln
_name.object_id                         diffrn_id
_name.linked_item_id                    '_unknown_at_this_stage'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_refln.frame_id

_definition.id                          '_diffrn_refln.frame_id'
_definition.update                      2014-07-07
_description.text                       
;
     This item is a pointer to _diffrn_data_frame.id
     in the DIFFRN_DATA_FRAME category.
;
_name.category_id                       diffrn_refln
_name.object_id                         frame_id
_name.linked_item_id                    '_diffrn_data_frame.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_refln.id

_definition.id                          '_diffrn_refln.id'
_definition.update                      2014-07-07
_description.text                       
;
     This item is a placeholder for the definition in the 
     PDBx/mmCIF dictionary.
;
_name.category_id                       diffrn_refln
_name.object_id                         id
_name.linked_item_id                    '_unknown_at_this_stage'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_refln.variant

_definition.id                          '_diffrn_refln.variant'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_refln.variant gives the variant
    to which the given DIFFRN_REFLN row is related.
    If this value is not given, the variant is assumed to the default
    null variant.  This item is a pointer to _variant.variant in the
    VARIANT category.
;
_name.category_id                       diffrn_refln
_name.object_id                         variant
_name.linked_item_id                    '_variant.variant'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_DIFFRN_SCAN

_definition.id                          DIFFRN_SCAN
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_SCAN category describe the parameters 
     of one or more scans, relating axis positions to frames.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_SCAN
_category.key_id                        '_diffrn_scan.id'
_category.key_list ['_diffrn_scan.id']

save_


save__diffrn_scan.date_end

_definition.id                          '_diffrn_scan.date_end'
_definition.update                      2014-07-07
_description.text                       
;
     The date and time of the end of the scan.  Note that this
     may be an estimate generated during the scan, before the
     precise time of the end of the scan is known.
;
_name.category_id                       diffrn_scan
_name.object_id                         date_end
_type.purpose                           Encode
_type.source                            Recorded
_type.container                         Single
_type.contents                          Date

save_


save__diffrn_scan.date_start

_definition.id                          '_diffrn_scan.date_start'
_definition.update                      2014-07-07
_description.text                       
;
     The date and time of the start of the scan.
;
_name.category_id                       diffrn_scan
_name.object_id                         date_start
_type.purpose                           Encode
_type.source                            Recorded
_type.container                         Single
_type.contents                          Date

save_


save__diffrn_scan.frame_id_end

_definition.id                          '_diffrn_scan.frame_id_end'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of the
     last frame in the scan.

     This item is a pointer to _diffrn_data_frame.id in the
     DIFFRN_DATA_FRAME category.
;
_name.category_id                       diffrn_scan
_name.object_id                         frame_id_end
_name.linked_item_id                    '_diffrn_data_frame.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan.frame_id_start

_definition.id                          '_diffrn_scan.frame_id_start'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of the
     first frame in the scan.
     This item is a pointer to _diffrn_data_frame.id in the
     DIFFRN_DATA_FRAME category.
;
_name.category_id                       diffrn_scan
_name.object_id                         frame_id_start
_name.linked_item_id                    '_diffrn_data_frame.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with ds as diffrn_scan
loop dsf as diffrn_scan_frame {
    if (dsf.scan_id == ds.id and dsf.frame_number == 1) {
        ds.frame_id_start = dsf.frame_id
    }
}

; 

save_


save__diffrn_scan.frames

_definition.id                          '_diffrn_scan.frames'
_definition.update                      2014-07-07
_description.text                       
;
     The value is the number of frames in the scan.
;
_name.category_id                       diffrn_scan
_name.object_id                         frames
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Count

save_


save__diffrn_scan.id

_definition.id                          '_diffrn_scan.id'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_scan.id uniquely identifies each
    scan.  The identifier is used to tie together all the
    information about the scan.
;
_name.category_id                       diffrn_scan
_name.object_id                         id
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan.integration_time

_definition.id                          '_diffrn_scan.integration_time'
_definition.update                      2014-07-07
_description.text                       
;
     Approximate average time in seconds to integrate each
     step of the scan.  The precise time for integration
     of each particular step must be provided in
     _diffrn_scan_frame.integration_time, even
     if all steps have the same integration time.
;
_name.category_id                       diffrn_scan
_name.object_id                         integration_time
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             seconds

save_


save__diffrn_scan.number_of_detectors

_definition.id                          '_diffrn_scan.number_of_detectors'
_name.object_id                         number_of_detectors
_name.category_id                       diffrn_scan
_definition.class                       Datum
_description.text                       'The number of detectors used in this scan'
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Single
_type.contents                          Integer
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
det_count = 0
loop dd as diffrn_detector {
    det_count = det_count + 1
}
_diffrn_scan.number_of_detectors = det_count

; 

save_


save__diffrn_scan.number_of_scanned_axes

_definition.id                          '_diffrn_scan.number_of_scanned_axes'
_name.object_id                         number_of_scanned_axes
_name.category_id                       diffrn_scan
_definition.class                       Datum
_description.text                       'The number of axes simultaneously moved while scanning'
_category_construct.new_ids             ''
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Single
_type.contents                          Integer
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with ds as diffrn_scan
axis_count = 0
loop dsa as diffrn_scan_axis {
   if (dsa.scan_id != ds.id) continue
   aincr = dsa.angle_increment
   dincr = dsa.displacement_increment
   if ((aincr != 0) or (dincr != 0)) {
               axis_count = axis_count + 1
 	}
    }
ds.number_of_scanned_axes = axis_count

; 

save_


save__diffrn_scan.time_period

_definition.id                          '_diffrn_scan.time_period'
_definition.update                      2014-07-07
_description.text                       
;
     Approximate average time in seconds between the start
     of each step of the scan.  The precise start-to-start
     time increment of each particular step may be provided in
     _diffrn_scan_frame.time_period.
;
_name.category_id                       diffrn_scan
_name.object_id                         time_period
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             seconds

save_


save__diffrn_scan.time_rstrt_incr

_definition.id                          '_diffrn_scan.time_rstrt_incr'
_definition.update                      2014-07-07
_description.text                       
;
     Approximate average time in seconds between the end
     of integration of each step of the scan than the start
     of integration of the next step.  In general, this will 
     agree with _diffrn_scan_frame.time_rstrt_incr.  The
     sum of the values of _diffrn_scan_frame.integration_time
     and  _diffrn_scan_frame.time_rstrt_incr is the
     time from the start of integration of one frame and the start of
     integration for the next frame and should equal the value of
     _diffrn_scan_frame.time_period for this
     frame.   If the individual frame values vary, then the value of
     _diffrn_scan.time_rstrt_incr will be
     representative of the ensemble of values of
     _diffrn_scan_frame_axis.time_rstrt_incr (e.g.  the mean).
;
_name.category_id                       diffrn_scan
_name.object_id                         time_rstrt_incr
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             seconds

save_


save_DIFFRN_SCAN_AXIS

_definition.id                          DIFFRN_SCAN_AXIS
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
items in the DIFFRN_SCAN_AXIS category describe the settings of
for particular scans.  Unspecified axes are assumed to be at
 zero points.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_SCAN_AXIS
_category.key_id                        '_diffrn_scan_axis.key'
_category.key_list ['_diffrn_scan_axis.scan_id'  '_diffrn_scan_axis.axis_id']
_category_construct.new_ids             ''

save_


save__diffrn_scan_axis.angle_increment

_definition.id                          '_diffrn_scan_axis.angle_increment'
_definition.update                      2014-07-07
_description.text                       
;
     The increment for each step for the specified axis
     in degrees.  In general, this will agree with
     _diffrn_scan_frame_axis.angle_increment. The
     sum of the values of _diffrn_scan_frame_axis.angle and
     _diffrn_scan_frame_axis.angle_increment is the
     angular setting of the axis at the end of the integration
     time for a given frame.  If the individual frame values
     vary, then the value of _diffrn_scan_axis.angle_increment 
     will be representative of the ensemble of values of
     _diffrn_scan_frame_axis.angle_increment (e.g.  the mean).
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         angle_increment
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_axis.angle_range

_definition.id                          '_diffrn_scan_axis.angle_range'
_definition.update                      2014-07-07
_description.text                       
;
     The range from the starting position for the specified axis.
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         angle_range
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_axis.angle_rstrt_incr

_definition.id                          '_diffrn_scan_axis.angle_rstrt_incr'
_definition.update                      2014-07-07
_description.text                       
;
     The increment after each step for the specified axis
     in degrees.  In general, this will agree with
     _diffrn_scan_frame_axis.angle_rstrt_incr.  The
     sum of the values of _diffrn_scan_frame_axis.angle,
     _diffrn_scan_frame_axis.angle_increment
     and  _diffrn_scan_frame_axis.angle_rstrt_incr is the
     angular setting of the axis at the start of the integration
     time for the next frame relative to a given frame and
     should equal _diffrn_scan_frame_axis.angle for this
     next frame.   If the individual frame values vary, then 
     the value of _diffrn_scan_axis.angle_rstrt_incr will be
     representative of the ensemble of values of
     _diffrn_scan_frame_axis.angle_rstrt_incr (e.g.  the mean).
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         angle_rstrt_incr
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_axis.angle_start

_definition.id                          '_diffrn_scan_axis.angle_start'
_definition.update                      2014-07-07
_description.text                       
;
     The starting position for the specified axis in degrees.
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         angle_start
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_axis.axis_id

_definition.id                          '_diffrn_scan_axis.axis_id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of one of
     the axes for the scan for which settings are being specified.
     Multiple axes may be specified for the same value of
     _diffrn_scan.id.
     This item is a pointer to _axis.id in the
     AXIS category.
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         axis_id
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_axis.displacement_increment

_definition.id                          '_diffrn_scan_axis.displacement_increment'
_definition.update                      2014-07-07
_description.text                       
;
     The increment for each step for the specified axis
     in millimetres.  In general, this will agree with
     _diffrn_scan_frame_axis.displacement_increment.
     The sum of the values of _diffrn_scan_frame_axis.displacement 
     and _diffrn_scan_frame_axis.displacement_increment is the
     angular setting of the axis at the end of the integration
     time for a given frame.  If the individual frame values
     vary, then the value of _diffrn_scan_axis.displacement_increment 
     will be representative of the ensemble of values of
     _diffrn_scan_frame_axis.displacement_increment (e.g. the mean).
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         displacement_increment
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__diffrn_scan_axis.displacement_range

_definition.id                          '_diffrn_scan_axis.displacement_range'
_definition.update                      2014-07-07
_description.text                       
;
     The range from the starting position for the specified axis.
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         displacement_range
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__diffrn_scan_axis.displacement_rstrt_incr

_definition.id                          '_diffrn_scan_axis.displacement_rstrt_incr'
_definition.update                      2014-07-07
_description.text                       
;
     The increment for each step for the specified axis
     in millimetres.  In general, this will agree with
     _diffrn_scan_frame_axis.displacement_rstrt_incr.
     The sum of the values of _diffrn_scan_frame_axis.displacement,
     _diffrn_scan_frame_axis.displacement_increment and
     _diffrn_scan_frame_axis.displacement_rstrt_incr is the
     angular setting of the axis at the start of the integration
     time for the next frame relative to a given frame and
     should equal _diffrn_scan_frame_axis.displacement
     for this next frame.  If the individual frame values vary, then 
     the value of _diffrn_scan_axis.displacement_rstrt_incr will be
     representative of the ensemble of values of
     _diffrn_scan_frame_axis.displacement_rstrt_incr (e.g.  the mean).
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         displacement_rstrt_incr
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__diffrn_scan_axis.displacement_start

_definition.id                          '_diffrn_scan_axis.displacement_start'
_definition.update                      2014-07-07
_description.text                       
;
     The starting position for the specified axis in millimetres.
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         displacement_start
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__diffrn_scan_axis.key

_definition.id                          '_diffrn_scan_axis.key'
_definition.update                      2015-11-17
_description.text                       
;
     The value of this data item is a unique identifier for this
     category
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         key
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
   _diffrn_scan_axis.key = [_diffrn_scan_axis.scan_id,_diffrn_scan_axis.axis_id]
; 

save_


save__diffrn_scan_axis.reference_angle

_definition.id                          '_diffrn_scan_axis.reference_angle'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in degrees
     against which measurements of the reference beam center
     and reference detector distance should be made.
     In general, this will agree with
     _diffrn_scan_frame_axis.reference_angle.
     If the individual frame values vary, then the value of
     _diffrn_scan_axis.reference_angle will be
     representative of the ensemble of values of
     _diffrn_scan_frame_axis.reference_angle (e.g.
     the mean).
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         reference_angle
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_axis.reference_displacement

_definition.id                          '_diffrn_scan_axis.reference_displacement'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in millimetres
     against which measurements of the reference beam center
     and reference detector distance should be made.
     In general, this will agree with
     _diffrn_scan_frame_axis.reference_displacement.
     If the individual frame values vary, then the value of
     _diffrn_scan_axis.reference_displacement will be
     representative of the ensemble of values of
     _diffrn_scan_frame_axis.reference_displacement (e.g. the mean).
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         reference_displacement
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             millimetres

save_


save__diffrn_scan_axis.scan_id

_definition.id                          '_diffrn_scan_axis.scan_id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of the
     scan for which axis settings are being specified.
     Multiple axes may be specified for the same value of
     _diffrn_scan.id.
     This item is a pointer to _diffrn_scan.id in the
     DIFFRN_SCAN category.
;
_name.category_id                       diffrn_scan_axis
_name.object_id                         scan_id
_name.linked_item_id                    '_diffrn_scan.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save_DIFFRN_SCAN_FRAME

_definition.id                          DIFFRN_SCAN_FRAME
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_SCAN_FRAME category describe
     the relationships of particular frames to scans.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_SCAN_FRAME
_category.key_id                        '_diffrn_scan_frame.key'
_category.key_list ['_diffrn_scan_frame.scan_id'  '_diffrn_scan_frame.frame_id']
_name.linked_item_id                    ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with dssf as diffrn_scan_simple_frames
diffrn_scan_frame (.scan_id = dssf.scan_id,
                     .frame_id = dssf.frame_id,
                     .frame_number = dssf.frame_number
                    )

; 

save_


save__diffrn_scan_frame.date

_definition.id                          '_diffrn_scan_frame.date'
_definition.update                      2014-07-07
_description.text                       
;
     The date and time of the start of the frame being scanned.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         date
_type.purpose                           Encode
_type.source                            Recorded
_type.container                         Single
_type.contents                          Date

save_


save__diffrn_scan_frame.frame_id

_definition.id                          '_diffrn_scan_frame.frame_id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of the
     frame being examined.  This item is a pointer to 
     _diffrn_data_frame.id in the DIFFRN_DATA_FRAME category.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         frame_id
_name.linked_item_id                    '_diffrn_data_frame.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_frame.frame_number

_definition.id                          '_diffrn_scan_frame.frame_number'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the number of the frame
     within the scan, starting with 1.  It is not necessarily
     the same as the value of _diffrn_scan_frame.frame_id,
     but it may be.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         frame_number
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Count
_enumeration.range                      1:

save_


save__diffrn_scan_frame.integration_time

_definition.id                          '_diffrn_scan_frame.integration_time'
_definition.update                      2014-07-07
_description.text                       
;
     The time in seconds to integrate this step of the scan.
     This should be the precise time of integration of each
     particular frame.  The value of this data item should
     be given explicitly for each frame and not inferred
     from the value of _diffrn_scan.integration_time.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         Integeregration_time
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             seconds

save_


save__diffrn_scan_frame.key

_definition.id                          '_diffrn_scan_frame.key'
_definition.update                      2015-11-12
_description.text                       
;
     The value of this data item is a unique identifier of items
     in this category.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         key
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
        _diffrn_scan_frame.key = [_diffrn_scan_frame.scan_id, _diffrn_scan_frame.frame_id]
; 

save_


save__diffrn_scan_frame.polarizn_Stokes_I

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_I'
_definition.update                      2014-07-07
_description.text                       
;
     Ip+In+Inp, where where Ip is the intensity (amplitude squared)
     of the electric vector in the plane of polarization,
     In is the intensity (amplitude squared) of the electric vector
     in the plane of the normal to the plane of polarization,
     and Inp is the intensity (amplitude squared) of the non-
     polarized (incoherent) electric vector.
     This is an average or other representative sample of the scan.
     This is the first of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
     Note that, if the polarized intensity Ip+In is required,
     (Ip+In)^2 is the sum of Q^2+U^2+V^2.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_I
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    1.0

save_


save__diffrn_scan_frame.polarizn_Stokes_I_esd

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_I_esd'
loop_
  _alias.definition_id
         '_diffrn_scan_frame.polarizn_Stokes_I_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd)i of _diffrn_scan_frame.polarizn_Stokes_I,
     Ip+In+Inp, where where Ip is the intensity (amplitude squared)
     of the electric vector in the plane of polarization,
     In is the intensity (amplitude squared) of the electric vector
     in the plane of the normal to the plane of polarization,
     and Inp is the intensity (amplitude squared) of the non-
     polarized (incoherent) electric vector.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_I_su
_name.linked_item_id                    '_diffrn_scan_frame.polarizn_Stokes_I'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_scan_frame.polarizn_Stokes_Q

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_Q'
_definition.update                      2014-07-07
_description.text                       
;
     (Ip-In)*cos(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
     This is an average or other representative sample of the scan.
     This is the second of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_Q
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_scan_frame.polarizn_Stokes_Q_esd

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_Q_esd'
loop_
  _alias.definition_id
         '_diffrn_scan_frame.polarizn_Stokes_Q_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd) of _diffrn_scan_frame.polarizn_Stokes_Q,
     (Ip-In)*cos(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_Q_su
_name.linked_item_id                    '_diffrn_scan_frame.polarizn_Stokes_Q'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_scan_frame.polarizn_Stokes_U

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_U'
_definition.update                      2014-07-07
_description.text                       
;
     (Ip-In)*sin(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
     This is an average or other representative sample of the scan.  
     This is the third of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_U
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_scan_frame.polarizn_Stokes_U_esd

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_U_esd'
loop_
  _alias.definition_id
         '_diffrn_scan_frame.polarizn_Stokes_U_su' 
_definition.update                      2014-07-30
_description.text                       
;
     The standard uncertainty (esd) _diffrn_scan_frame.polarizn_Stokes_U,
     (Ip-In)*sin(2*theta), where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization, In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_U_su
_name.linked_item_id                    '_diffrn_scan_frame.polarizn_Stokes_U'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_scan_frame.polarizn_Stokes_V

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_V'
_definition.update                      2014-07-07
_description.text                       
;
     +/-2*sqrt(IpIn), with a + sign for right-handed circular
     polarization, where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization and In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
     This is an average or other representative sample of the scan.
     This is the fourth of the Stokes polarization parameters,
     I, Q, U, V (also known as I, M, C, S).  See
     H. H. Berry, G. Gabrielse, A. E. Livingston (1977),
     "Measurement of the Stokes parameters of Light",
     Applied Optics, 16:12, 3200 -- 3205.
     If the absolute intensity is not known, the value 1.
     is assumed for I, and all 4 Stokes parameters are
     dimensionless.  When the absolute intensity is known,
     all 4 Stokes parameters are in units of Watts per
     square meter.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_V
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_scan_frame.polarizn_Stokes_V_esd

_definition.id                          '_diffrn_scan_frame.polarizn_Stokes_V_esd'
loop_
  _alias.definition_id
         '_diffrn_scan_frame.polarizn_Stokes_V_su' 
_definition.update                      2014-07-30
_description.text                       
;
     Standard uncertainty (esd) _diffrn_scan_frame.polarizn_Stokes_V,
     +/-2*sqrt(IpIn), with a + sign for right-handed circular
     polarization, where where Ip is the intensity
     (amplitude squared) of the electric vector in the plane of
     polarization and In is the intensity (amplitude squared) of
     the electric vector in the plane of the normal to the
     plane of polarization, and theta is the angle as viewed
     from the specimen, between the normal to the polarization
     plane and the laboratory Y axis as defined in the
     AXIS category.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         polarizn_Stokes_V_su
_name.linked_item_id                    '_diffrn_scan_frame.polarizn_Stokes_V'
_type.purpose                           SU
_type.source                            Related
_type.container                         Single
_type.contents                          Real

save_


save__diffrn_scan_frame.scan_id

_definition.id                          '_diffrn_scan_frame.scan_id'
_definition.update                      2014-07-07
_description.text                       
;
    The value of _diffrn_scan_frame.scan_id identifies the scan
    containing this frame.  This item is a pointer to 
    _diffrn_scan.id in the DIFFRN_SCAN category.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         scan_id
_name.linked_item_id                    '_diffrn_scan.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_frame.time_period

_definition.id                          '_diffrn_scan_frame.time_period'
_definition.update                      2014-07-07
_description.text                       
;
     The time in seconds between the start of this frame and the
     start of the next frame, if any.  If there is no next frame,
     a null value should be given.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         time_period
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             seconds

save_


save__diffrn_scan_frame.time_rstrt_incr

_definition.id                          '_diffrn_scan_frame.time_rstrt_incr'
_definition.update                      2014-07-07
_description.text                       
;
     The time in seconds between the end of integration of this step o
     and the start of integration of the next step.
     The sum of the values of _diffrn_scan_frame.integration_time
     and  _diffrn_scan_frame.time_rstrt_incr is the
     time from the start of integration of one frame and the start of
     integration for the next frame and should equal the value of
     _diffrn_scan_frame.time_period for this
     frame.   The value of _diffrn_scan.time_rstrt_incr will be
     representative of the ensemble of values of
     _diffrn_scan_frame_axis.time_rstrt_incr (e.g.  the mean).
     If there is no next frame, a null value should be given.
;
_name.category_id                       diffrn_scan_frame
_name.object_id                         time_rstrt_incr
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             seconds

save_


save_DIFFRN_SCAN_FRAME_AXIS

_definition.id                          DIFFRN_SCAN_FRAME_AXIS
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
     Data items in the DIFFRN_SCAN_FRAME_AXIS category describe the
     settings of axes for particular frames.  Unspecified axes are
     assumed to be at their zero points.  If, for any given frame,
     nonzero values apply for any of the data items in this category,
     those values should be given explicitly in this category and not
     simply inferred from values in DIFFRN_SCAN_AXIS.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_SCAN_FRAME_AXIS
_category.key_id                        '_diffrn_scan_frame_axis.key'
_category.key_list ['_diffrn_scan_frame_axis.frame_id'  
                   '_diffrn_scan_frame_axis.axis_id']
_category_construct.new_ids             ''

save_


save__diffrn_scan_frame_axis.angle

_definition.id                          '_diffrn_scan_frame_axis.angle'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in degrees for this frame.
     This is the setting at the start of the integration time.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         angle
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_frame_axis.angle_increment

_definition.id                          '_diffrn_scan_frame_axis.angle_increment'
_definition.update                      2014-07-07
_description.text                       
;
     The increment for this frame for the angular setting of
     the specified axis in degrees.  The sum of the values
     of _diffrn_scan_frame_axis.angle and
     _diffrn_scan_frame_axis.angle_increment is the
     angular setting of the axis at the end of the integration
     time for this frame.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         angle_increment
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_frame_axis.angle_rstrt_incr

_definition.id                          '_diffrn_scan_frame_axis.angle_rstrt_incr'
_definition.update                      2014-07-07
_description.text                       
;
     The increment after this frame for the angular setting of
     the specified axis in degrees.  The sum of the values
     of _diffrn_scan_frame_axis.angle,
     _diffrn_scan_frame_axis.angle_increment and
     _diffrn_scan_frame_axis.angle_rstrt_incr is the
     angular setting of the axis at the start of the integration
     time for the next frame and should equal
     _diffrn_scan_frame_axis.angle for this next frame.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         angle_rstrt_incr
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_frame_axis.axis_id

_definition.id                          '_diffrn_scan_frame_axis.axis_id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of one of
     the axes for the frame for which settings are being specified.
     Multiple axes may be specified for the same value of
     _diffrn_scan_frame.frame_id.  This item is a pointer to 
     _axis.id in the AXIS category.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         axis_id
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_frame_axis.displacement

_definition.id                          '_diffrn_scan_frame_axis.displacement'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in millimetres for this
     frame.  This is the setting at the start of the integration
     time.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         displacement
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__diffrn_scan_frame_axis.displacement_increment

_definition.id                          '_diffrn_scan_frame_axis.displacement_increment'
_definition.update                      2014-07-07
_description.text                       
;
     The increment for this frame for the displacement setting of
     the specified axis in millimetres.  The sum of the values
     of _diffrn_scan_frame_axis.displacement and
     _diffrn_scan_frame_axis.displacement_increment is the
     angular setting of the axis at the end of the integration
     time for this frame.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         displacement_increment
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__diffrn_scan_frame_axis.displacement_rstrt_incr

_definition.id                          '_diffrn_scan_frame_axis.displacement_rstrt_incr'
_definition.update                      2014-07-07
_description.text                       
;
     The increment for this frame for the displacement setting of
     the specified axis in millimetres.  The sum of the values
     of _diffrn_scan_frame_axis.displacement,
     _diffrn_scan_frame_axis.displacement_increment and
     _diffrn_scan_frame_axis.displacement_rstrt_incr is the
     angular setting of the axis at the start of the integration
     time for the next frame and should equal
     _diffrn_scan_frame_axis.displacement for this next frame.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         displacement_rstrt_incr
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             millimetres

save_


save__diffrn_scan_frame_axis.frame_id

_definition.id                          '_diffrn_scan_frame_axis.frame_id'
_definition.update                      2014-07-07
_description.text                       
;
     The value of this data item is the identifier of the
     frame for which axis settings are being specified.
     Multiple axes may be specified for the same value of
     _diffrn_scan_frame.frame_id.
     This item is a pointer to _diffrn_data_frame.id in the
     DIFFRN_DATA_FRAME category.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         frame_id
_name.linked_item_id                    '_diffrn_data_frame.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_frame_axis.reference_angle

_definition.id                          '_diffrn_scan_frame_axis.reference_angle'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in degrees
     against which measurements of the reference beam center
     and reference detector distance should be made.
     This is normally the same for all frames, but the
     option is provided here of making changes when needed.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         reference_angle
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_enumeration.default                    0.0
_units.code                             degrees

save_


save__diffrn_scan_frame_axis.reference_displacement

_definition.id                          '_diffrn_scan_frame_axis.reference_displacement'
_definition.update                      2014-07-07
_description.text                       
;
     The setting of the specified axis in millimetres for this
     frame against which measurements of the reference beam center
     and reference detector distance should be made.
     This is normally the same for all frames, but the
     option is provided here of making changes when
     needed.
     If not provided, it is assumed to be equal to
     _diffrn_scan_frame_axis.displacement.
;
_name.category_id                       diffrn_scan_frame_axis
_name.object_id                         reference_displacement
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             millimetres

save_


save_DIFFRN_SCAN_FRAME_MONITOR

_definition.id                          DIFFRN_SCAN_FRAME_MONITOR
_definition.scope                       Category
_definition.class                       Loop
_definition.update                      2014-07-07
_description.text                       
;
    Data items in the DIFFRN_SCAN_FRAME_MONITOR category record
    the values and details about each monitor for each frame of data
    during a scan.
    Each monitor value is uniquely identified by the combination of
    the scan_id given by _diffrn_scan_frame.scan_id
    the frame_id given by _diffrn_scan_frame_monitor.frame_id,
    the monitor's detector_id given by
    _diffrn_scan_frame_monitor.detector_id,
    and a 1-based ordinal given by _diffrn_scan_frame_monitor.id.
    If there is only one frame for the scan, the value of
    _diffrn_scan_frame_monitor.frame_id may be omitted.
    A single frame may have more than one monitor value, and each
    monitor value may be the result of integration over the entire
    frame integration time given by the value of
    _diffrn_scan_frame.integration_time
    or many monitor values may be reported over shorter times given
    by the value of _diffrn_scan_frame_monitor.integration_time.  If
    only one monitor value for a given monitor is collected during
    the integration time of the frame, the value of
    _diffrn_scan_frame_monitor.id may be
    omitted.
;
_name.category_id                       DEMO_DIC_HEAD
_name.object_id                         DIFFRN_SCAN_FRAME_MONITOR
_category.key_id                        '_diffrn_scan_frame_monitor.key'
_category.key_list ['_diffrn_scan_frame_monitor.id'  
                   '_diffrn_scan_frame_monitor.detector_id'  
                   '_diffrn_scan_frame_monitor.scan_id'  
                   '_diffrn_scan_frame_monitor.frame_id']

save_


save__diffrn_scan_frame_monitor.detector_id

_definition.id                          '_diffrn_scan_frame_monitor.detector_id'
_definition.update                      2014-07-07
_description.text                       
;
     This data item is a pointer to _diffrn_detector.id in
     the DIFFRN_DETECTOR category.

;
_name.category_id                       diffrn_scan_frame_monitor
_name.object_id                         detector_id
_name.linked_item_id                    '_diffrn_detector.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_frame_monitor.frame_id

_definition.id                          '_diffrn_scan_frame_monitor.frame_id'
_definition.update                      2014-07-07
_description.text                       
;
     This item is a pointer to _diffrn_data_frame.id
     in the DIFFRN_DATA_FRAME category.
;
_name.category_id                       diffrn_scan_frame_monitor
_name.object_id                         frame_id
_name.linked_item_id                    '_diffrn_data_frame.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_frame_monitor.id

_definition.id                          '_diffrn_scan_frame_monitor.id'
_definition.update                      2014-07-07
_description.text                       
;
    This item is an integer identifier which, along with
    _diffrn_scan_frame_monitor.detector_id,
    _diffrn_scan_frame_monitor.scan_id, and
    _diffrn_scan_frame_monitor.frame_id
    should uniquely identify the monitor value being recorded
    If _array_data.binary_id is not explicitly given,
    it defaults to 1.
;
_name.category_id                       diffrn_scan_frame_monitor
_name.object_id                         id
_type.purpose                           Number
_type.source                            Assigned
_type.container                         Single
_type.contents                          Integer
_enumeration.default                    1

save_


save__diffrn_scan_frame_monitor.integration_time

_definition.id                          '_diffrn_scan_frame_monitor.integration_time'
_definition.update                      2014-07-07
_description.text                       
;
     The precise time for integration of the monitor value given in
     _diffrn_scan_frame_monitor.value
     must be given in _diffrn_scan_frame_monitor.integration_time.
;
_name.category_id                       diffrn_scan_frame_monitor
_name.object_id                         Integeregration_time
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real
_units.code                             seconds

save_


save__diffrn_scan_frame_monitor.scan_id

_definition.id                          '_diffrn_scan_frame_monitor.scan_id'
_definition.update                      2014-07-07
_description.text                       
;
     Pointer to _diffrn_scan.id in the DIFFRN_SCAN category.
;
_name.category_id                       diffrn_scan_frame_monitor
_name.object_id                         scan_id
_name.linked_item_id                    '_diffrn_scan.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__diffrn_scan_frame_monitor.value

_definition.id                          '_diffrn_scan_frame_monitor.value'
_definition.update                      2014-07-07
_description.text                       
;
     The value reported by the monitor detector should be given in
     _diffrn_scan_frame_monitor.value.
     The value is typed as float to allow of monitors for very intense
     that cannot report all digits, but when available, all digits of
     monitor should be recorded.
;
_name.category_id                       diffrn_scan_frame_monitor
_name.object_id                         value
_type.purpose                           Number
_type.source                            Derived
_type.container                         Single
_type.contents                          Real

save_


save_diffrn_scan_simple

_name.object_id                         diffrn_scan_simple
_name.category_id                       demo_dic_head
_definition.id                          diffrn_scan_simple
_definition.scope                       Category
_definition.class                       Loop
_description.text 
                                        'This category provides information about scans consisting of identically-structured frames obtained by scanning a single axis.'
_category.key_id                        '_diffrn_scan_simple.scan_id'
_name.linked_item_id                    ''
_category_construct.new_ids [scan_id]
_category_construct.type                Filter
_category_construct.filter [1]
_category_construct.components ['_diffrn_scan.number_of_scanned_axes']

save_


save__diffrn_scan_simple.axis_id

_definition.id                          '_diffrn_scan_simple.axis_id'
_name.object_id                         axis_id
_name.category_id                       diffrn_scan_simple
_definition.class                       Datum
_description.text                       'The identifier of the axis that was scanned.'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_name.linked_item_id                    '_axis.id'
_category_construct.new_ids             ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with dss as diffrn_scan_simple
loop dsa as diffrn_scan_axis {
 if (dsa.scan_id != dss.scan_id) continue
 if (dsa.angle_increment != 0 or dsa.displacement_increment != 0) {
    axisid = dsa.axis_id
    }
}
dss.axis_id = axisid

; 

save_


save__diffrn_scan_simple.scan_id

_definition.id                          '_diffrn_scan_simple.scan_id'
_name.object_id                         scan_id
_name.category_id                       diffrn_scan_simple
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Text

save_


save_diffrn_scan_simple_frames

_name.object_id                         diffrn_scan_simple_frames
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          diffrn_scan_simple_frames
_definition.scope                       Category
_definition.class                       Loop
_description.text                       
;This category provides information about diffraction frames for scans that consist of identically-constructed
frames with a single scan axis. 
;
_category.key_id                        '_diffrn_scan_simple_frames.id'
_name.linked_item_id                    ''
_category_construct.new_ids [id  scan_id]
_category_construct.type                Pullback
_category_construct.components ['_full_frame.scan_id'  
                               '_diffrn_scan_simple.scan_id']
loop_
  _category_key.name
         '_diffrn_scan_simple.id'      
         '_diffrn_scan_simple_frames.frame_id' 
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
loop sad as scan_array_data {
    do frame_no = 1, len(sad.array_data) {
        diffrn_scan_simple_frames   (.frame_number = frame_no,
                                     .array_data = sad.array_data[frame_no-1],
                                     .scan_id = sad.scan_id,
                                     .frame_id = 'Frame'+`frame_no`,
                                     .array_id = 'Array1',
                                     .binary_id = `frame_no`,
                                     .id = [sad.scan_id,'Frame'+`frame_no`])
    }
}

; 

save_


save__diffrn_scan_simple_frames.array_data

_definition.id                          '_diffrn_scan_simple_frames.array_data'
_name.object_id                         array_data
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__diffrn_scan_simple_frames.array_id

_definition.id                          '_diffrn_scan_simple_frames.array_id'
_name.object_id                         array_id
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__diffrn_scan_simple_frames.axis_id

_definition.id                          '_diffrn_scan_simple_frames.axis_id'
_name.object_id                         axis_id
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_category_construct.components          ''
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    '_diffrn_scan_simple.axis_id'

save_


save__diffrn_scan_simple_frames.binary_id

_definition.id                          '_diffrn_scan_simple_frames.binary_id'
_name.object_id                         binary_id
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__diffrn_scan_simple_frames.element_id

_definition.id                          '_diffrn_scan_simple_frames.element_id'
_name.object_id                         element_id
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__diffrn_scan_simple_frames.frame_id

_definition.id                          '_diffrn_scan_simple_frames.frame_id'
_name.object_id                         frame_id
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'Frame IDs corresponding to the the identified scan.'
_name.linked_item_id                    '_diffrn_data_frame.id'
_type.purpose                           Key
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_category_construct.components          ''

save_


save__diffrn_scan_simple_frames.frame_number

_definition.id                          '_diffrn_scan_simple_frames.frame_number'
_name.object_id                         frame_number
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__diffrn_scan_simple_frames.id

_definition.id                          '_diffrn_scan_simple_frames.id'
_name.object_id                         id
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text                       'This value is used to access individual simple frames.'
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Multiple
_type.contents                          Text
_name.linked_item_id                    ''
_category_construct.components          ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with dssf as diffrn_scan_simple_frames {
 dssf.id = [dssf.scan_id, dssf.frame_id]
}

; 

save_


save__diffrn_scan_simple_frames.scan_id

_definition.id                          '_diffrn_scan_simple_frames.scan_id'
_name.object_id                         scan_id
_name.category_id                       diffrn_scan_simple_frames
_definition.class                       Datum
_description.text 
                                        'An identifier for a simple scan. This item points to _diffrn_scan.id'
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    ''
_category_construct.components          ''

save_


save_full_frame

_name.object_id                         full_frame
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          full_frame
_definition.scope                       Category
_definition.class                       Loop
_description.text 
                                        'Items in the full frame category describe data arrays from detectors consisting of a single element.'
_category.key_id                        '_full_frame.id'
_name.linked_item_id                    ''
_category_construct.new_ids [id  detector_element_key]
_category_construct.components ['_diffrn_data_frame.detector_element_key'  
                               '_diffrn_detector_monolithic_element.key']
_category_construct.type                Pullback
loop_
  _category_key.name
         '_full_frame.id' 

save_


save__full_frame.array_id

_definition.id                          '_full_frame.array_id'
_name.object_id                         array_id
_name.category_id                       full_frame
_definition.class                       Datum
_description.text                       'A pointer to the array structure describing this full frame'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_category_construct.components          ''

save_


save__full_frame.binary_id

_definition.id                          '_full_frame.binary_id'
_name.object_id                         binary_id
_name.category_id                       full_frame
_definition.class                       Datum
_description.text 
                                        'A pointer to the binary_id containing the data for this full frame.'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_name.linked_item_id                    '_array_data.binary_id'

save_


save__full_frame.detector_element_id

_definition.id                          '_full_frame.detector_element_id'
_name.object_id                         detector_element_id
_name.category_id                       full_frame
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_category_construct.components          ''
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    '_diffrn_detector_element.key'

save_


save__full_frame.detector_element_key

_definition.id                          '_full_frame.detector_element_key'
_name.object_id                         detector_element_key
_name.category_id                       full_frame
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_category_construct.new_ids             ''
_type.purpose                           Link
_type.source                            Related
_type.container                         Multiple
_type.contents                          Code
_name.linked_item_id                    '_diffrn_detector_element.key'

save_


save__full_frame.frame_id

_definition.id                          '_full_frame.frame_id'
_name.object_id                         frame_id
_name.category_id                       full_frame
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_full_frame.frame_id = _full_frame.id[1]

; 

save_


save__full_frame.id

_definition.id                          '_full_frame.id'
_name.object_id                         id
_name.category_id                       full_frame
_definition.class                       Datum
_description.text                       'This item uniquely identifies a full frame of data'
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Code
_name.linked_item_id                    ''
_category_construct.new_ids             ''
_category_construct.components          ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_full_frame.id = [_full_frame.scan_id,_full_frame.frame_id]

; 

save_


save__full_frame.scan_id

_definition.id                          '_full_frame.scan_id'
_name.object_id                         scan_id
_name.category_id                       full_frame
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
_full_frame.scan_id = _full_frame.id[0]

; 

save_


save_goniometer_axis

_name.object_id                         goniometer_axis
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          goniometer_axis
_definition.scope                       Category
_definition.class                       Loop
_description.text                       'This category contains axes that belong to the goniometer'
_category.key_id                        '_goniometer_axis.id'
loop_
  _category_key.name
         '_goniometer_axis.id' 
_category_construct.type                Filter
_category_construct.components ['_axis.equipment']
_category_construct.text_filter [goniometer]

save_


save__goniometer_axis.id

_definition.id                          '_goniometer_axis.id'
_name.object_id                         id
_name.category_id                       goniometer_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related

save_


save__goniometer_axis.offset

_definition.id                          '_goniometer_axis.offset'
_name.object_id                         offset
_name.category_id                       goniometer_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__goniometer_axis.type

_definition.id                          '_goniometer_axis.type'
_name.object_id                         type
_name.category_id                       goniometer_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save__goniometer_axis.vector

_definition.id                          '_goniometer_axis.vector'
_name.object_id                         vector
_name.category_id                       goniometer_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'

save_


save_scan_array_data

_name.object_id                         scan_array_data
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          scan_array_data
_definition.scope                       Category
_definition.class                       Loop
_description.text                       
;Items in the scan array category describe data arrays obtained by stacking all exposures in a single scan.
Not all items have been defined but in general a series of items analogous to the array data items should
be defined.

;
_category.key_id                        '_scan_array_data.scan_id'
_name.linked_item_id                    ''
_category_construct.new_ids             ''
_category_construct.components          ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
loop dss as diffrn_scan_simple {
scan_array_data (.scan_id = dss.scan_id
	     )
}

; 
loop_
  _category_key.name
         '_scan_array_data.scan_id' 

save_


save__scan_array_data.array_data

_definition.id                          '_scan_array_data.array_data'
_name.object_id                         array_data
_name.category_id                       scan_array_data
_definition.class                       Datum
_description.text 
                                        'A three-dimensional dataset obtained by concatenating all frames corresponding to a single scan ID in order with each frame assumed to have identical structure. '
_type.purpose                           Number
_type.source                            Assigned
_type.container                         Array
_type.contents                          Integer
_name.linked_item_id                    ''
_category_construct.new_ids             ''
_category_construct.components          ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with sad as scan_array_data {
    total_frames = diffrn_scan[sad.scan_id].frames
    # now build up frames in order (this is a very slow way to do it)
    frame_list = []
    do frame_no = 1,total_frames {
      loop dssf as diffrn_scan_simple_frames {
        if (dssf.scan_id == sad.scan_id ) {
	frame_lookup = [dssf.scan_id,dssf.frame_id]
	frame_number = diffrn_scan_frame[frame_lookup].frame_number
	if (frame_number == frame_no) {
               array_ptr = full_frame[frame_lookup].binary_id
               print "** Now appending frame " + `array_ptr`
               frame_list ++= array_data[array_ptr].as_integers  #assuming binary_id is key
	    }
            }
        }
            
    }
  }
  final_result = frame_list[0]
  do frame_no = 1, total_frames-1 {
      final_result ++= frame_list[frame_no]
      }
  _scan_array_data.array_data = final_result

; 

save_


save__scan_array_data.scan_id

_definition.id                          '_scan_array_data.scan_id'
_name.object_id                         scan_id
_name.category_id                       scan_array_data
_definition.class                       Datum
_description.text 
                                        'This is a pointer to the scan ID. The data correspond to all individual measurements in this scan.'
_type.purpose                           Key
_type.source                            Assigned
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    '_diffrn_scan.id'

save_


save_simple_array_axis

_name.object_id                         simple_array_axis
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          simple_array_axis
_definition.scope                       Category
_definition.class                       Loop
_description.text                       
;This category contains axes that belong to the detector and which are not coupled.

;
_category.key_id                        '_simple_detector_axis.id'
loop_
  _category_key.name
         '_detector_axis.id' 
_name.linked_item_id                    ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
seen_sets = List()
seen_axes = List()
coupled_sets = List()
loop asla as array_structure_list_axis {
     if (asla.axis_id not in seen_axes) {
	seen_axes ++= asla.axis_id
     }
     if (asla.axis_set_id not in seen_sets) {
            seen_sets ++= asla.axis_set_id
     } else {   #more than one entry
     coupled_sets ++= asla.axis_set_id
     }
}
coupled_axes = List()
loop asla as array_structure_list_axis {
    if (asla.axis_set_id in coupled_sets) {
	coupled_axes ++= asla.axis_id
           }
    }
loop ax as axis {
    if (ax.id in seen_axes and ax.id not in coupled_axes) {
        simple_array_axis (.id = ax.id,
	                   .vector = ax.vector,
	                   .offset = ax.offset,
	                   .type   = ax.type
                             )
        }
}

; 

save_


save__simple_array_axis.id

_definition.id                          '_simple_array_axis.id'
_name.object_id                         id
_name.category_id                       simple_array_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Key
_type.source                            Related
_type.container                         Single
_type.contents                          Text
_name.linked_item_id                    '_axis.id'

save_


save__simple_array_axis.offset

_definition.id                          '_simple_array_axis.offset'
_name.object_id                         offset
_name.category_id                       simple_array_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Array
_type.contents                          Real

save_


save__simple_array_axis.offset_convention2

_definition.id                          '_simple_array_axis.offset_convention2'
_name.object_id                         offset_convention2
_name.category_id                       simple_array_axis
_definition.class                       Datum
_description.text 
                                        'The axis vector expressed in an alternate coordinate system where Z points along the beam away from the source.'
_name.linked_item_id                    ''
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Array
_type.contents                          Real
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with saa as simple_array_axis
saa.offset_convention2 = saa.offset * Array([[-1,0,0],[0,1,0],[0,0,-1]])

; 

save_


save__simple_array_axis.type

_definition.id                          '_simple_array_axis.type'
_name.object_id                         type
_name.category_id                       simple_array_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           State
_type.source                            Recorded
_type.container                         Single
_type.contents                          Text

save_


save__simple_array_axis.vector

_definition.id                          '_simple_array_axis.vector'
_name.object_id                         vector
_name.category_id                       simple_array_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Array
_type.contents                          Real

save_


save__simple_array_axis.vector_convention2

_definition.id                          '_simple_array_axis.vector_convention2'
_name.object_id                         vector_convention2
_name.category_id                       simple_array_axis
_definition.class                       Datum
_description.text 
                                        'The axis vector expressed in an alternate coordinate system where Z points along the beam away from the source.'
_name.linked_item_id                    ''
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
with saa as simple_array_axis 
saa.vector_convention2 = saa.vector * Array([[-1,0,0],[0,1,0],[0,0,-1]])

; 
_type.purpose                           Number
_type.source                            Recorded
_type.container                         Array
_type.contents                          Real

save_


save_simple_data_axis

_name.object_id                         simple_data_axis
_name.category_id                       DEMO_DIC_HEAD
_definition.id                          simple_data_axis
_definition.scope                       Category
_definition.class                       Loop
_description.text 
                                        'Items in the data_axis category describe the axes used relevant to the entire dataset as a single data array, that is, they include both scan axes and detector array axes, but not axes that were fixed during data collection. Being simple, they do not describe coupled axis motion.'
_category.key_id                        '_simple_data_axis.id'
loop_
  _category_key.name
         '_simple_data_axis.id' 
loop_
  _method.purpose
  _method.expression
         Evaluation          
;
# List the simple detector axes with precedence

loop sad as scan_array_data {
    scan_id = sad.scan_id
    one_frame_id = diffrn_scan[scan_id].frame_id_start
    frame_key = [scan_id,one_frame_id]
    one_array = full_frame[frame_key].array_id
    maxprec = 0
    loop asl as array_structure_list {
        if (asl.array_id == one_array) {
	setid = asl.axis_set_id
	precedence = asl.precedence
	maxprec = max([maxprec,precedence])
	loop asla as array_structure_list_axis {
	    if (asla.axis_set_id == setid) {
	       simple_data_axis (.scan_id = scan_id,
	                         .id = asla.axis_id,
                                     .precedence = precedence
                                    )
                  }
            }
         }
     }
    # add scan axis
    simple_data_axis (.scan_id = scan_id,
                      .id = diffrn_scan_simple[scan_id].axis_id,
                      .precedence = maxprec + 1
                      )
}

; 

save_


save__simple_data_axis.id

_definition.id                          '_simple_data_axis.id'
_name.object_id                         id
_name.category_id                       simple_data_axis
_definition.class                       Datum
_description.text                       'An axis identifier'
_name.linked_item_id                    '_axis.id'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code

save_


save__simple_data_axis.precedence

_definition.id                          '_simple_data_axis.precedence'
_name.object_id                         precedence
_name.category_id                       simple_data_axis
_definition.class                       Datum
_description.text                       
;The precedence of this axis as an integer. The lowest-numbered axis is the most rapidly-varying. As
this proof of concept assumes that only one axis is changed for each scan, the highest-precedence axis
will be the scan axis. 
;
_type.purpose                           Number
_type.source                            Assigned
_type.container                         Single
_type.contents                          Integer

save_


save__simple_data_axis.scan_id

_definition.id                          '_simple_data_axis.scan_id'
_name.object_id                         scan_id
_name.category_id                       simple_data_axis
_definition.class                       Datum
_description.text                       'PLEASE DEFINE ME'
_type.purpose                           Link
_type.source                            Related
_type.container                         Single
_type.contents                          Code
_name.linked_item_id                    '_diffrn_scan.id'

save_
